<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>用户与文件 | Gocifer&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="云原生技术博客，专注于计算机、网络、云计算相关技术的学习和总结。Linux，网络，运维，云计算，golang，云原生，网络安全等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.1ba410de.css" as="style"><link rel="preload" href="/assets/js/app.5bb0b44e.js" as="script"><link rel="preload" href="/assets/js/2.717babc4.js" as="script"><link rel="preload" href="/assets/js/23.e7c42960.js" as="script"><link rel="prefetch" href="/assets/js/10.3e114544.js"><link rel="prefetch" href="/assets/js/11.4161c730.js"><link rel="prefetch" href="/assets/js/12.e2b56866.js"><link rel="prefetch" href="/assets/js/13.26d11d5a.js"><link rel="prefetch" href="/assets/js/14.101242cd.js"><link rel="prefetch" href="/assets/js/15.aeeabc5e.js"><link rel="prefetch" href="/assets/js/16.501e71d2.js"><link rel="prefetch" href="/assets/js/17.25c53b09.js"><link rel="prefetch" href="/assets/js/18.76227f51.js"><link rel="prefetch" href="/assets/js/19.9d5c5e01.js"><link rel="prefetch" href="/assets/js/20.341b2b12.js"><link rel="prefetch" href="/assets/js/21.114174e0.js"><link rel="prefetch" href="/assets/js/22.c1e44e04.js"><link rel="prefetch" href="/assets/js/24.f1f7cdcf.js"><link rel="prefetch" href="/assets/js/25.5967fc32.js"><link rel="prefetch" href="/assets/js/26.41a226b5.js"><link rel="prefetch" href="/assets/js/27.bb0aa905.js"><link rel="prefetch" href="/assets/js/28.cfe8776c.js"><link rel="prefetch" href="/assets/js/29.cc05a8f8.js"><link rel="prefetch" href="/assets/js/3.cd13fc02.js"><link rel="prefetch" href="/assets/js/30.d5b46292.js"><link rel="prefetch" href="/assets/js/31.c027a203.js"><link rel="prefetch" href="/assets/js/32.442e6531.js"><link rel="prefetch" href="/assets/js/33.82b70710.js"><link rel="prefetch" href="/assets/js/34.b8848f81.js"><link rel="prefetch" href="/assets/js/35.bc60de53.js"><link rel="prefetch" href="/assets/js/36.1f2a2d01.js"><link rel="prefetch" href="/assets/js/37.fcb90e28.js"><link rel="prefetch" href="/assets/js/38.b14fdbcd.js"><link rel="prefetch" href="/assets/js/39.851097e7.js"><link rel="prefetch" href="/assets/js/4.be18f558.js"><link rel="prefetch" href="/assets/js/40.f527e03d.js"><link rel="prefetch" href="/assets/js/41.d76d2a9f.js"><link rel="prefetch" href="/assets/js/42.951864f6.js"><link rel="prefetch" href="/assets/js/43.4bf254e0.js"><link rel="prefetch" href="/assets/js/44.6fef7953.js"><link rel="prefetch" href="/assets/js/45.0adf5159.js"><link rel="prefetch" href="/assets/js/46.b40047ba.js"><link rel="prefetch" href="/assets/js/47.b089bd7c.js"><link rel="prefetch" href="/assets/js/48.d1436f7a.js"><link rel="prefetch" href="/assets/js/49.a174fba0.js"><link rel="prefetch" href="/assets/js/5.780ad7e3.js"><link rel="prefetch" href="/assets/js/50.18fc3240.js"><link rel="prefetch" href="/assets/js/51.76715a85.js"><link rel="prefetch" href="/assets/js/52.08f7eb24.js"><link rel="prefetch" href="/assets/js/53.e6230a91.js"><link rel="prefetch" href="/assets/js/54.f0cdd834.js"><link rel="prefetch" href="/assets/js/55.c24858ef.js"><link rel="prefetch" href="/assets/js/56.ee51e524.js"><link rel="prefetch" href="/assets/js/57.dd385ae8.js"><link rel="prefetch" href="/assets/js/58.9ad6ea89.js"><link rel="prefetch" href="/assets/js/59.c08ecfda.js"><link rel="prefetch" href="/assets/js/6.cee5b248.js"><link rel="prefetch" href="/assets/js/60.75e0eee8.js"><link rel="prefetch" href="/assets/js/61.3a226ab8.js"><link rel="prefetch" href="/assets/js/62.01a2bf4b.js"><link rel="prefetch" href="/assets/js/63.8c76681d.js"><link rel="prefetch" href="/assets/js/64.db33256b.js"><link rel="prefetch" href="/assets/js/65.2e1ebaab.js"><link rel="prefetch" href="/assets/js/66.e094042d.js"><link rel="prefetch" href="/assets/js/67.dbaea1c1.js"><link rel="prefetch" href="/assets/js/68.e235e7aa.js"><link rel="prefetch" href="/assets/js/69.4172339e.js"><link rel="prefetch" href="/assets/js/7.6e9c4628.js"><link rel="prefetch" href="/assets/js/70.b7584039.js"><link rel="prefetch" href="/assets/js/71.f49e21cb.js"><link rel="prefetch" href="/assets/js/72.968c2e04.js"><link rel="prefetch" href="/assets/js/73.72c69fef.js"><link rel="prefetch" href="/assets/js/74.f1f00f31.js"><link rel="prefetch" href="/assets/js/75.849d225f.js"><link rel="prefetch" href="/assets/js/76.cf2cfd7f.js"><link rel="prefetch" href="/assets/js/77.927cbb1b.js"><link rel="prefetch" href="/assets/js/78.0e032591.js"><link rel="prefetch" href="/assets/js/79.30db201e.js"><link rel="prefetch" href="/assets/js/8.f6bc7e45.js"><link rel="prefetch" href="/assets/js/80.9c3e2106.js"><link rel="prefetch" href="/assets/js/81.b5a3857b.js"><link rel="prefetch" href="/assets/js/9.803a3433.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1ba410de.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/GL1.png" alt="Gocifer's blog" class="logo"> <span class="site-name can-hide">Gocifer's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🐧  Linux 学习" class="dropdown-title"><a href="/Linux/" class="link-title">🐧  Linux 学习</a> <span class="title" style="display:none;">🐧  Linux 学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux 基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/efbb24/.html" class="nav-link">常用命令</a></li><li class="dropdown-subitem"><a href="/pages/efbb24/.html" class="nav-link">基础原理</a></li><li class="dropdown-subitem"><a href="/pages/efbb24/.html" class="nav-link">基础服务</a></li><li class="dropdown-subitem"><a href="/pages/efbb24/.html" class="nav-link">疑难杂症</a></li></ul></li><li class="dropdown-item"><h4>Linux 提高</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/LinuxAdvanced/" class="nav-link">《GTech：Linux&amp;Unix 运维》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 编程》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 进阶》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🕸️  网络·计算·安全" class="dropdown-title"><a href="/Linux/" class="link-title">🕸️  网络·计算·安全</a> <span class="title" style="display:none;">🕸️  网络·计算·安全</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GTech：交换与路由》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：网络安全》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：物联网》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：云计算》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🌩️  云原生" class="dropdown-title"><a href="/Linux/" class="link-title">🌩️  云原生</a> <span class="title" style="display:none;">🌩️  云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GCNCF：CNCF Conf 会议摘录》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Serverless》 </a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Service Mesh》 </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🗒  开发笔记" class="dropdown-title"><a href="/ui/" class="link-title">🗒  开发笔记</a> <span class="title" style="display:none;">🗒  开发笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">后端</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Angular</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Flutter</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Golang 集萃</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔪  项目与实践" class="dropdown-title"><a href="/technology/" class="link-title">🔪  项目与实践</a> <span class="title" style="display:none;">🔪  项目与实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💡  杂文" class="dropdown-title"><a href="/more/" class="link-title">💡  杂文</a> <span class="title" style="display:none;">💡  杂文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⭐  收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">⭐  收藏</a> <span class="title" style="display:none;">⭐  收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">0</a></li><li class="dropdown-subitem"><a href="/pages/802a1ca6f7b71c59/" class="nav-link">软件/插件安利</a></li></ul></li><li class="dropdown-item"><h4>资源</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/eee83a9211a70f9d/" class="nav-link">云原生</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">前端/客户端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">服务端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">计算机基础知识</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📇  索引" class="dropdown-title"><a href="/archives/" class="link-title">📇  索引</a> <span class="title" style="display:none;">📇  索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏳️‍🌈  关于" class="dropdown-title"><a href="/about/" class="link-title">🏳️‍🌈  关于</a> <span class="title" style="display:none;">🏳️‍🌈  关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">个人简历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">项目经历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/gocifer/GLog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>Gocifer</h3> <span>
        云原生菜鸟
      </span></div></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🐧  Linux 学习" class="dropdown-title"><a href="/Linux/" class="link-title">🐧  Linux 学习</a> <span class="title" style="display:none;">🐧  Linux 学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux 基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/efbb24/.html" class="nav-link">常用命令</a></li><li class="dropdown-subitem"><a href="/pages/efbb24/.html" class="nav-link">基础原理</a></li><li class="dropdown-subitem"><a href="/pages/efbb24/.html" class="nav-link">基础服务</a></li><li class="dropdown-subitem"><a href="/pages/efbb24/.html" class="nav-link">疑难杂症</a></li></ul></li><li class="dropdown-item"><h4>Linux 提高</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/LinuxAdvanced/" class="nav-link">《GTech：Linux&amp;Unix 运维》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 编程》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 进阶》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🕸️  网络·计算·安全" class="dropdown-title"><a href="/Linux/" class="link-title">🕸️  网络·计算·安全</a> <span class="title" style="display:none;">🕸️  网络·计算·安全</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GTech：交换与路由》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：网络安全》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：物联网》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：云计算》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🌩️  云原生" class="dropdown-title"><a href="/Linux/" class="link-title">🌩️  云原生</a> <span class="title" style="display:none;">🌩️  云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GCNCF：CNCF Conf 会议摘录》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Serverless》 </a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Service Mesh》 </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🗒  开发笔记" class="dropdown-title"><a href="/ui/" class="link-title">🗒  开发笔记</a> <span class="title" style="display:none;">🗒  开发笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">后端</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Angular</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Flutter</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Golang 集萃</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔪  项目与实践" class="dropdown-title"><a href="/technology/" class="link-title">🔪  项目与实践</a> <span class="title" style="display:none;">🔪  项目与实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💡  杂文" class="dropdown-title"><a href="/more/" class="link-title">💡  杂文</a> <span class="title" style="display:none;">💡  杂文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⭐  收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">⭐  收藏</a> <span class="title" style="display:none;">⭐  收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">0</a></li><li class="dropdown-subitem"><a href="/pages/802a1ca6f7b71c59/" class="nav-link">软件/插件安利</a></li></ul></li><li class="dropdown-item"><h4>资源</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/eee83a9211a70f9d/" class="nav-link">云原生</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">前端/客户端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">服务端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">计算机基础知识</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📇  索引" class="dropdown-title"><a href="/archives/" class="link-title">📇  索引</a> <span class="title" style="display:none;">📇  索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏳️‍🌈  关于" class="dropdown-title"><a href="/about/" class="link-title">🏳️‍🌈  关于</a> <span class="title" style="display:none;">🏳️‍🌈  关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">个人简历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">项目经历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/gocifer/GLog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>序言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Linux 基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/98238b/" class="sidebar-link">基本命令</a></li><li><a href="/pages/eb6ef1/" class="sidebar-link">软件包管理</a></li><li><a href="/pages/6ad43d/" class="sidebar-link">备份管理</a></li><li><a href="/pages/1fc34b/" class="sidebar-link">文件系统管理</a></li><li><a href="/pages/6f3eaa/" class="sidebar-link">磁盘管理</a></li><li><a href="/pages/4e34ad/" class="sidebar-link">磁盘加密</a></li><li><a href="/pages/babc26/" class="sidebar-link">服务管理</a></li><li><a href="/pages/f156e2/" class="sidebar-link">启动管理</a></li><li><a href="/pages/b01c69/" class="sidebar-link">权限管理</a></li><li><a href="/pages/c86810/" class="sidebar-link">日志管理</a></li><li><a href="/pages/c1aebf/" class="sidebar-link">系统管理</a></li><li><a href="/pages/efbb24/" aria-current="page" class="active sidebar-link">用户与文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/efbb24/#sudoers-file" class="sidebar-link">sudoers file</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#查看用户信息" class="sidebar-link">查看用户信息</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#添加新的用户账号" class="sidebar-link">添加新的用户账号</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#删除帐号" class="sidebar-link">删除帐号</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#修改帐号" class="sidebar-link">修改帐号</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#用户口令的管理" class="sidebar-link">用户口令的管理</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#增加一个新的用户组" class="sidebar-link">增加一个新的用户组</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#删除一个已有的用户组" class="sidebar-link">删除一个已有的用户组</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#修改用户组的属性" class="sidebar-link">修改用户组的属性</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#gpasswd命令" class="sidebar-link">gpasswd命令</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#用户组的切换" class="sidebar-link">用户组的切换</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#etc-passwd文件" class="sidebar-link">/etc/passwd文件</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#伪-用-户-含-义" class="sidebar-link">伪 用 户 含 义</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#拥有帐户文件" class="sidebar-link">拥有帐户文件</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#手动创建用户" class="sidebar-link">手动创建用户</a></li><li class="sidebar-sub-header"><a href="/pages/efbb24/#添加批量用户" class="sidebar-link">添加批量用户</a></li></ul></li><li><a href="/pages/ea0f0b/" class="sidebar-link">用户与用户组管理</a></li><li><a href="/pages/63dd5e/" class="sidebar-link">Linux常用命令</a></li><li><a href="/pages/30fa62/" class="sidebar-link">Linux学习方法</a></li><li><a href="/pages/6219f7/" class="sidebar-link">Linux寻根</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux 网络管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Shell 编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>操作系统杂谈</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>虚拟化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>内核初探</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux GUI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux FAQ</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper"><div class="articleInfo-wrap" data-v-14888ed5><div class="articleInfo" data-v-14888ed5><ul class="breadcrumbs" data-v-14888ed5><li data-v-14888ed5><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-14888ed5></a></li> <li data-v-14888ed5><a href="/categories/?category=GTech%EF%BC%9ALinux%E5%9F%BA%E7%A1%80" title="分类" data-v-14888ed5>GTech：Linux基础</a></li> <li data-v-14888ed5><a href="/categories/?category=Linux%20%E5%9F%BA%E7%A1%80" title="分类" data-v-14888ed5>Linux 基础</a></li></ul> <div class="info" data-v-14888ed5><div title="作者" class="author iconfont icon-touxiang" data-v-14888ed5><a href="https://github.com/gocifer" target="_blank" title="作者" class="beLink" data-v-14888ed5>Gocifer</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-14888ed5><a href="javascript:;" data-v-14888ed5>2020-07-30</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          用户与文件
        </h1> <div class="theme-vdoing-content content__default"><p>[toc]</p> <h1 id="linux系统用户账号的管理"><a href="#linux系统用户账号的管理" class="header-anchor">#</a> Linux系统用户账号的管理</h1> <blockquote><p>https://m.linuxidc.com/Linux/2016-10/136251.htm&amp;http:/m.linuxidc.com/Linux/2016-10/136251.htm</p></blockquote> <p>Linux 用户和用户组管理
Linux系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。</p> <p>用户的账号一方面可以帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。</p> <p>每个用户账号都拥有一个惟一的用户名和各自的口令。</p> <p>用户在登录时键入正确的用户名和口令后，就能够进入系统和自己的主目录。</p> <p>实现用户账号的管理，要完成的工作主要有如下几个方面：</p> <p>用户账号的添加、删除与修改。
用户口令的管理。
用户组的管理。</p> <p>添加用户账号就是在系统中创建一个新账号，然后为新账号分配用户号、用户组、主目录和登录Shell等资源。刚添加的账号是被锁定的，无法使用。</p> <h2 id="sudoers-file"><a href="#sudoers-file" class="header-anchor">#</a> sudoers file</h2> <p><strong>not in the sudoers file, incident will be reported?</strong></p> <hr> <p>way1:add yourself to the wheel group.</p> <p>The command is <code>su -c &quot;usermod -g wheel username&quot;</code></p> <hr> <p>way2:</p> <p>1.切换到超级用户：$ su</p> <p>2.打开/etc/sudoers文件：$vi /etc/sudoers</p> <p>3.修改文件内容：</p> <p>找到“root    ALL=(ALL)       ALL”一行，在下面插入新的一行，内容是“cuser   ALL=(ALL)       ALL”，然后在vi键入命令“wq!”保存并退出。</p> <p>注：这个文件是只读的，不加“!”保存会失败。</p> <p>4.退出超级用户：$ exit</p> <p>5.可以尽情使用sudo了</p> <h2 id="查看用户信息"><a href="#查看用户信息" class="header-anchor">#</a> 查看用户信息</h2> <p>用id命令可以查看用户信息，用法：</p> <p><strong>id  [option]  [USERNAME]，不指定用户名时默认用户为当前用户。</strong></p> <p>-u 查看UID</p> <p>-g 查看基本组的GID</p> <p>-G 查看所有组的GIO</p> <p>-n 和上面的选项组合使用，用于显示名称，而非id号</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1 [root@compute ~]# id -u user1
2 1010
3 [root@compute ~]# id -un user1
4 user1
5 [root@compute ~]# id -G user3
6 1012 0 1010
7 [root@compute ~]# id -Gn user3
8 user3 root user1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>finger命令也可以查看用户相关信息</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1 [root@compute ~]# finger user1
2 Login: user1                      Name: 
3 Directory: /home/user1                  Shell: /bin/bash
4 Never logged in.
5 No mail.
6 No Plan.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="添加新的用户账号"><a href="#添加新的用户账号" class="header-anchor">#</a> 添加新的用户账号</h2> <p>使用useradd命令</p> <p>其语法如下：</p> <p><strong>useradd 选项 用户名</strong></p> <p>参数说明：</p> <p>选项:</p> <p>-c comment 指定一段注释性描述。</p> <p>-d 目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录，默认情况下家目录是/home下的与用户名同名的目录。</p> <p>-g 用户组 指定用户所属的用户组，可以使用GID也可以使用组名来为其指明基本组</p> <p>-G 用户组，用户组 指定用户所属的附加组，附加组可以有多个，多个附加组之间用逗号隔开</p> <p>-s Shell文件 指定用户的登录Shell。</p> <p>-u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号</p> <p>-m,--create-home:强制创建家目录；</p> <p>-M 不为新用户创建家目录,即更改系统在/etc/login.defs中的设置（CREATE_HOME）为yes;</p> <p>-r,--system:创建一个系统用户</p> <p>-r 添加新用户为系统用户，系统用户的UID在1-499之间，一般不能登入，没有家目录。</p> <p>-e:用户账号的过期期限，过期后会被锁定，日期格式YYYY-MM-DD</p> <p>-f:密码过期后，账户被 彻底禁用之前的天数。0表示立即禁用，-1表示禁用这个功能。</p> <p>注：该命令添加的用户的部分默认参数（比如用户的默认shell）在/etc/default/useradd文件中。</p> <p>用户名:</p> <p>指定新账号的登录名。</p> <p>实例1</p> <p><code># useradd –d /usr/sam -m sam</code></p> <p>此命令创建了一个用户sam，其中-d和-m选项用来为登录名sam产生一个主目录/usr/sam（/usr为默认的用户主目录所在的父目录）。</p> <p>实例2</p> <p><code># useradd -s /bin/sh -g group –G adm,root gem</code>
此命令新建了一个用户gem，该用户的登录Shell是 /bin/sh，它属于group用户组，同时又属于adm和root用户组，其中group用户组是其主组。</p> <p>这里可能新建组：#groupadd group及groupadd adm</p> <p>增加用户账号就是在/etc/passwd文件中为新用户增加一条记录，同时更新其他系统文件如/etc/shadow, /etc/group等。</p> <p>Linux提供了集成的系统管理工具userconf，它可以用来对用户账号进行统一管理。</p> <h2 id="删除帐号"><a href="#删除帐号" class="header-anchor">#</a> 删除帐号</h2> <p>如果一个用户的账号不再使用，可以从系统中删除。删除用户账号就是要将/etc/passwd等系统文件中的该用户记录删除，必要时还删除用户的主目录。</p> <p>删除一个已有的用户账号使用userdel命令，其格式如下：</p> <p><strong>userdel 选项 用户名</strong></p> <p>常用的选项是 -r，它的作用是把用户的主目录一起删除。</p> <p>-r,--remove:用户主目录中的文件将随用户主目录和用户邮箱一起删除；</p> <p>例如：</p> <p><code># userdel -r sam</code>
此命令删除用户sam在系统文件中（主要是/etc/passwd, /etc/shadow, /etc/group等）的记录，同时删除用户的主目录。</p> <h2 id="修改帐号"><a href="#修改帐号" class="header-anchor">#</a> 修改帐号</h2> <p>修改用户账号就是根据实际情况更改用户的有关属性，如用户号、主目录、用户组、登录Shell等。</p> <p>修改已有用户的信息使用usermod命令，其格式如下：</p> <p><strong>usermod 选项 用户名</strong></p> <p>常用的选项包括-c, -d, -m, -g, -G, -s, -u以及-o等，这些选项的意义与useradd命令中的选项一样，可以为用户指定新的资源值。</p> <p>-L:锁定用户的密码，会在用户加密的密码之前放置一个“！“</p> <p>-U:解锁用户的密码，这将移除加密的密码之前的”！“</p> <p>另外，有些系统可以使用选项：-l 新用户</p> <p>这个选项指定一个新的账号，即将原来的用户名改为新的用户名。</p> <p>例如：</p> <p><code># usermod -s /bin/ksh -d /home/z –g developer sam</code>
此命令将用户sam的登录Shell修改为ksh，主目录改为/home/z，用户组改为developer。</p> <p>-l 参数用于修改用户名</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1 [root@compute ~]# usermod -l u3 user3
2 [root@compute ~]# id u3
3 uid=505(u3) gid=0(root) 组=0(root),1010(user1)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>注：</p> <p>如果使用-G为用户修改附加组的话，默认情况下会覆盖原有的附加组，如果只想追加新的附加组可以使用 -aG 其中a表示追加。</p> <p>使用 -d 修改用户家目录的时候最好用再配合 -m 使用，其意思是修改家目录的同时把原来家目录下的文件复制一份到目的家目录。</p> <p>修改用户的登入shell还可以使用 chsh （change shell）命令。其用法为 chsh  USERNAME</p> <p>可以用pwck来检查用户账号的完整性。</p> <h2 id="用户口令的管理"><a href="#用户口令的管理" class="header-anchor">#</a> 用户口令的管理</h2> <p>用户管理的一项重要内容是用户口令的管理。用户账号刚创建时没有口令，但是被系统锁定，无法使用，必须为其指定口令后才可以使用，即使是指定空口令。</p> <p>指定和修改用户口令的Shell命令是passwd。超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。命令的格式为：</p> <p><strong>passwd 选项 用户名</strong></p> <p>可使用的选项：</p> <p>-l 锁定口令，即禁用账号。
-u 口令解锁。
-d 使账号无口令。
-f 强迫用户下次登录时修改口令。
--stdin:从标准输入接收密码：echo “PASSWORD” | passwd --stdin USERNAME
如果默认用户名，则修改当前用户的口令。</p> <p>例如，假设当前用户是sam，则下面的命令修改该用户自己的口令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ passwd 
Old password:****** 
New password:******* 
Re-enter new password:*******
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果是超级用户，可以用下列形式指定任何用户的口令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># passwd sam 
New password:******* 
Re-enter new password:*******
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>普通用户修改自己的口令时，passwd命令会先询问原口令，验证后再要求用户输入两遍新口令，如果两次输入的口令一致，则将这个口令指定给用户；而超级用户为用户指定口令时，就不需要知道原口令。</p> <p>为了系统安全起见，用户应该选择比较复杂的口令，例如最好使用8位长的口令，口令中包含有大写、小写字母和数字，并且应该与姓名、生日等不相同。</p> <p>为用户指定空口令时，执行下列形式的命令：</p> <p><code># passwd -d sam</code>
此命令将用户sam的口令删除，这样用户sam下一次登录时，系统就不再询问口令。</p> <p><code># passwd -l sam</code>
此命令还可以用-l(lock)选项锁定某一用户，使其不能登录，例如：</p> <h1 id="linux系统用户组的管理"><a href="#linux系统用户组的管理" class="header-anchor">#</a> Linux系统用户组的管理</h1> <p>每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同Linux 系统对用户组的规定有所不同，如Linux下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。</p> <p>用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对/etc/group文件的更新。</p> <h2 id="增加一个新的用户组"><a href="#增加一个新的用户组" class="header-anchor">#</a> 增加一个新的用户组</h2> <p>使用groupadd命令。其格式如下：</p> <p><strong>groupadd 选项 用户组</strong></p> <p>可以使用的选项有：</p> <p>-g GID 指定新用户组的组标识号（GID）。</p> <p>-o 一般与-g选项同时使用，表示新用户组的GID可以与系统已有用户组的GID相同。</p> <p>-n 修改组名。</p> <p>实例1：</p> <p><code># groupadd group1</code></p> <p>此命令向系统中增加了一个新组group1，新组的组标识号是在当前已有的最大组标识号的基础上加1。</p> <p>实例2：</p> <p><code># groupadd -g 101 group2</code></p> <p>此命令向系统中增加了一个新组group2，同时指定新组的组标识号是101。</p> <h2 id="删除一个已有的用户组"><a href="#删除一个已有的用户组" class="header-anchor">#</a> 删除一个已有的用户组</h2> <p>使用groupdel命令，其格式如下：</p> <p>groupdel 用户组</p> <p>例如：</p> <p><code># groupdel group1</code></p> <p>此命令从系统中删除组group1。</p> <h2 id="修改用户组的属性"><a href="#修改用户组的属性" class="header-anchor">#</a> 修改用户组的属性</h2> <p>使用groupmod命令。其语法如下：</p> <p><strong>groupmod 选项 用户组</strong></p> <p>常用的选项有：</p> <p>-g GID 为用户组指定新的组标识号。</p> <p>-o 与-g选项同时使用，用户组的新GID可以与系统已有用户组的GID相同。</p> <p>-n新用户组 将用户组的名字改为新名字</p> <p>实例1：</p> <p><code># groupmod -g 102 group2</code></p> <p>此命令将组group2的组标识号修改为102。</p> <p>实例2：</p> <p><code># groupmod –g 10000 -n group3 group2</code></p> <p>此命令将组group2的标识号改为10000，组名修改为group3。</p> <h2 id="gpasswd命令"><a href="#gpasswd命令" class="header-anchor">#</a> gpasswd命令</h2> <p>gpasswd命令是Linux下工作组文件/etc/group和/etc/gshadow管理工具。</p> <p>语法</p> <p><strong>gpasswd(选项)(参数)</strong></p> <p>选项</p> <p>-a：添加用户到组；</p> <p>-d：从组删除用户；</p> <p>-A：指定管理员；</p> <p>-M：指定组成员和-A的用途差不多；</p> <p>-r：删除密码；</p> <p>-R：限制用户登入组，只有组中的成员才可以用newgrp加入该组。</p> <p>参数</p> <p>组：指定要管理的工作组。</p> <p>实例
如系统有个peter账户，该账户本身不是groupname群组的成员，使用newgrp需要输入密码即可。</p> <p>gpasswd groupname
让使用者暂时加入成为该组成员，之后peter建立的文件group也会是groupname。所以该方式可以暂时让peter建立文件时使用其他的组，而不是peter本身所在的组。</p> <p>所以使用gpasswd groupname设定密码，就是让知道该群组密码的人可以暂时切换具备groupname群组功能的。</p> <p>gpasswd -A peter users
这样peter就是users群组的管理员，就可以执行下面的操作:</p> <p>gpasswd -a mary users
gpasswd -a allen users</p> <p>注意：添加用户到某一个组 可以使用usermod -G group_name</p> <p>user_name这个命令可以添加一个用户到指定的组，但是以前添加的组就会清空掉。</p> <p>所以想要添加一个用户到一个组，同时保留以前添加的组时，请使用gpasswd这个命令来添加操作用户：</p> <p><code>gpasswd -a user_name group_name</code></p> <h2 id="用户组的切换"><a href="#用户组的切换" class="header-anchor">#</a> 用户组的切换</h2> <p>如果一个用户同时属于多个用户组，那么用户可以在用户组之间切换，以便具有其他用户组的权限。</p> <p>用户可以在登录后，使用命令newgrp切换到其他用户组，这个命令的参数就是目的用户组。例如：</p> <p><strong>$ newgrp root</strong></p> <p>这条命令将当前用户切换到root用户组，前提条件是root用户组确实是该用户的主组或附加组。类似于用户账号的管理，用户组的管理也可以通过集成的系统管理工具来完成。</p> <h1 id="与用户账号有关的系统文件"><a href="#与用户账号有关的系统文件" class="header-anchor">#</a> 与用户账号有关的系统文件</h1> <p>完成用户管理的工作有许多种方法，但是每一种方法实际上都是对有关的系统文件进行修改。</p> <p>与用户和用户组相关的信息都存放在一些系统文件中，这些文件包括/etc/passwd, /etc/shadow, /etc/group等。</p> <p>下面分别介绍这些文件的内容。</p> <h2 id="etc-passwd文件"><a href="#etc-passwd文件" class="header-anchor">#</a> /etc/passwd文件</h2> <p>是用户管理工作涉及的最重要的一个文件。</p> <p>Linux系统中的每个用户都在/etc/passwd文件中有一个对应的记录行，它记录了这个用户的一些基本属性。</p> <p>这个文件对所有用户都是可读的。它的内容类似下面的例子：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>＃ cat /etc/passwd

root:x:0:0:Superuser:/:
daemon:x:1:1:System daemons:/etc:
bin:x:2:2:Owner of system commands:/bin:
sys:x:3:3:Owner of system files:/usr/sys:
adm:x:4:4:System accounting:/usr/adm:
uucp:x:5:5:UUCP administrator:/usr/lib/uucp:
auth:x:7:21:Authentication administrator:/tcb/files/auth:
cron:x:9:16:Cron daemon:/usr/spool/cron:
listen:x:37:4:Network daemon:/usr/net/nls:
lp:x:71:18:Printer administrator:/usr/spool/lp:
sam:x:200:50:Sam san:/usr/sam:/bin/sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>从上面的例子我们可以看到，/etc/passwd中一行记录对应着一个用户，每行记录又被冒号(:)分隔为7个字段，其格式和具体含义如下：</p> <p><strong>用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell</strong></p> <p>1）&quot;用户名&quot;是代表用户账号的字符串。</p> <p>通常长度不超过8个字符，并且由大小写字母和/或数字组成。登录名中不能有冒号(😃，因为冒号在这里是分隔符。</p> <p>为了兼容起见，登录名中最好不要包含点字符(.)，并且不使用连字符(-)和加号(+)打头。</p> <p>2）“口令”一些系统中，存放着加密后的用户口令字。</p> <p>虽然这个字段存放的只是用户口令的加密串，不是明文，但是由于/etc/passwd文件对所有用户都可读，所以这仍是一个安全隐患。因此，现在许多Linux 系统（如SVR4）都使用了shadow技术，把真正的加密后的用户口令字存放到/etc/shadow文件中，而在/etc/passwd文件的口令字段中只存放一个特殊的字符，例如“x”或者“*”。</p> <p>3）“用户标识号”是一个整数，系统内部用它来标识用户。</p> <p>一般情况下它与用户名是一一对应的。如果几个用户名对应的用户标识号是一样的，系统内部将把它们视为同一个用户，但是它们可以有不同的口令、不同的主目录以及不同的登录Shell等。</p> <p>通常用户标识号的取值范围是0～65 535。</p> <p>0是超级用户root的标识号，1～99由系统保留，作为管理账号，普通用户的标识号从100开始。在Linux系统中，这个界限是500。</p> <p>4）“组标识号”字段记录的是用户所属的用户组。</p> <p>它对应着/etc/group文件中的一条记录。</p> <p>5)“注释性描述”字段记录着用户的一些个人情况。</p> <p>例如用户的真实姓名、电话、地址等，这个字段并没有什么实际的用途。在不同的Linux 系统中，这个字段的格式并没有统一。在许多Linux系统中，这个字段存放的是一段任意的注释性描述文字，用做finger命令的输出。</p> <p>6)“主目录”，也就是用户的起始工作目录。</p> <p>它是用户在登录到系统之后所处的目录。在大多数系统中，各用户的主目录都被组织在同一个特定的目录下，而用户主目录的名称就是该用户的登录名。各用户对自己的主目录有读、写、执行（搜索）权限，其他用户对此目录的访问权限则根据具体情况设置。</p> <p>7)用户登录后，要启动一个进程，负责将用户的操作传给内核，这个进程是用户登录到系统后运行的命令解释器或某个特定的程序，即Shell。</p> <p>Shell是用户与Linux系统之间的接口。Linux的Shell有许多种，每种都有不同的特点。常用的有sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)等。</p> <p>系统管理员可以根据系统情况和用户习惯为用户指定某个Shell。如果不指定Shell，那么系统使用sh为默认的登录Shell，即这个字段的值为/bin/sh。</p> <p>用户的登录Shell也可以指定为某个特定的程序（此程序不是一个命令解释器）。</p> <p>利用这一特点，我们可以限制用户只能运行指定的应用程序，在该应用程序运行结束后，用户就自动退出了系统。有些Linux 系统要求只有那些在系统中登记了的程序才能出现在这个字段中。</p> <p>8)系统中有一类用户称为伪用户（psuedo users）。</p> <p>这些用户在/etc/passwd文件中也占有一条记录，但是不能登录，因为它们的登录Shell为空。它们的存在主要是方便系统管理，满足相应的系统进程对文件属主的要求。</p> <p>常见的伪用户如下所示：</p> <h2 id="伪-用-户-含-义"><a href="#伪-用-户-含-义" class="header-anchor">#</a> 伪 用 户 含 义</h2> <p>bin 拥有可执行的用户命令文件</p> <p>sys 拥有系统文件</p> <p>adm 拥有帐户文件</p> <p>uucp UUCP使用</p> <p>lp lp或lpd子系统使用</p> <p>nobody NFS使用</p> <h2 id="拥有帐户文件"><a href="#拥有帐户文件" class="header-anchor">#</a> 拥有帐户文件</h2> <ol><li>除了上面列出的伪用户外，还有许多标准的伪用户，例如：audit, cron, mail, usenet等，它们也都各自为相关的进程和文件所需要。</li></ol> <p>由于/etc/passwd文件是所有用户都可读的，如果用户的密码太简单或规律比较明显的话，一台普通的计算机就能够很容易地将它破解，因此对安全性要求较高的Linux系统都把加密后的口令字分离出来，单独存放在一个文件中，这个文件是/etc/shadow文件。 有超级用户才拥有该文件读权限，这就保证了用户密码的安全性。</p> <hr> <ol start="2"><li>/etc/shadow
其中的记录行与/etc/passwd中的一一对应，它由pwconv命令根据/etc/passwd中的数据自动产生</li></ol> <p>它的文件格式与/etc/passwd类似，由若干个字段组成，字段之间用&quot;:&quot;隔开。这些字段是：</p> <p><strong>登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志</strong></p> <p>&quot;登录名&quot;是与/etc/passwd文件中的登录名相一致的用户账号</p> <p>&quot;口令&quot;字段存放的是加密后的用户口令字，长度为13个字符。如果为空，则对应用户没有口令，登录时不需要口令；如果含有不属于集合 { ./0-9A-Za-z }中的字符，则对应的用户不能登录。</p> <p>&quot;最后一次修改时间&quot;表示的是从某个时刻起，到用户最后一次修改口令时的天数。时间起点对不同的系统可能不一样。例如在SCO Linux 中，这个时间起点是1970年1月1日。</p> <p>&quot;最小时间间隔&quot;指的是两次修改口令之间所需的最小天数。</p> <p>&quot;最大时间间隔&quot;指的是口令保持有效的最大天数。</p> <p>&quot;警告时间&quot;字段表示的是从系统开始警告用户到用户密码正式失效之间的天数。</p> <p>&quot;不活动时间&quot;表示的是用户没有登录活动但账号仍能保持有效的最大天数。</p> <p>&quot;失效时间&quot;字段给出的是一个绝对的天数，如果使用了这个字段，那么就给出相应账号的生存期。期满后，该账号就不再是一个合法的账号，也就不能再用来登录了。</p> <p>下面是/etc/shadow的一个例子：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>＃ cat /etc/shadow

root:Dnakfw28zf38w:8764:0:168:7:::
daemon:*::0:0::::
bin:*::0:0::::
sys:*::0:0::::
adm:*::0:0::::
uucp:*::0:0::::
nuucp:*::0:0::::
auth:*::0:0::::
cron:*::0:0::::
listen:*::0:0::::
lp:*::0:0::::
sam:EkdiSECLWPdSa:9740:0:0::::
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr> <ol start="3"><li>用户组的所有信息都存放在/etc/group文件中。</li></ol> <p>将用户分组是Linux 系统中对用户进行管理及控制访问权限的一种手段。</p> <p>每个用户都属于某个用户组；一个组中可以有多个用户，一个用户也可以属于不同的组。</p> <p>当一个用户同时是多个组中的成员时，在/etc/passwd文件中记录的是用户所属的主组，也就是登录时所属的默认组，而其他组称为附加组。</p> <p>用户要访问属于附加组的文件时，必须首先使用newgrp命令使自己成为所要访问的组中的成员。</p> <p>用户组的所有信息都存放在/etc/group文件中。此文件的格式也类似于/etc/passwd文件，由冒号(:)隔开若干个字段，这些字段有：</p> <p><strong>组名:口令:组标识号:组内用户列表</strong></p> <p>&quot;组名&quot;是用户组的名称，由字母或数字构成。与/etc/passwd中的登录名一样，组名不应重复。</p> <p>&quot;口令&quot;字段存放的是用户组加密后的口令字。一般Linux</p> <p>系统的用户组都没有口令，即这个字段一般为空，或者是*。</p> <p>&quot;组标识号&quot;与用户标识号类似，也是一个整数，被系统内部用来标识组。</p> <p>&quot;组内用户列表&quot;是属于这个组的所有用户的列表/b]，不同用户之间用逗号(,)分隔。这个用户组可能是用户的主组，也可能是附加组。</p> <p>/etc/group文件的一个例子如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>root::0:root
bin::2:root,bin
sys::3:root,uucp
adm::4:root,adm
daemon::5:root,daemon
lp::7:root,lp
users::20:root,sam
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="手动创建用户"><a href="#手动创建用户" class="header-anchor">#</a> 手动创建用户</h2> <p>这部分需要了解linux保存用户的几个配置文件。</p> <p>/etc/passwd —— 账号文件</p> <p>/etc/shadow —— 密码文件</p> <p>/etc/group—— 组信息文件</p> <p>/etc/gshadow —— 组密码文件</p> <p>/etc/skel —— 用户默认家目录的备份文件</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1 [root@compute demo]# tail -1 /etc/passwd
2 user3:x:505:0::/home/user3:/bin/tcsh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>passwd文件中的配置规则如下：</strong></p> <p>用户名：密码占位符：用户ID：组ID：一般的信息：家目录：默认登入shell</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1 [root@compute demo]# tail -1 /etc/shadow
2 user3:$6$W58G6w9w$W7qYMrf5U9TF3yAfdqZhlluiiCgfd5eyDGaRbs0j5eVCGgisA8aEYGvmitpAraHC1MppdmiD9jGLgHWADQ3nK0:17374:0:99999:7:::
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>shadow文件的配置规则如下：</strong></p> <p>账号</p> <p>加密的密码，注意前三个字符 &amp;6&amp; 代表着密码的加密方式，后面会用到。</p> <p>最后一次修改密码的日期，该位是从1970年1月1号开始到上次密码修改的天数，0表示用户下一次登入需要改密码，空白表示密码年龄功能被禁用。</p> <p>密码最小年龄，0或空白表示没有最小年龄。</p> <p>密码最大年龄，空白表示没有密码最大年龄。超过密码最大年龄还未改密码将进入密码警告时间段。</p> <p>密码警告时间段，该阶段会提示用户修改密码，0或空白表示没有密码警告时间段，超过密码警告时间段将密码禁用期。</p> <p>密码禁用期，该阶段会强制用户修改密码，不修改就无法登入。空白表示没有禁用期，超过将进入账户过期期。</p> <p>账户过期期，账户过期后该账户将无法登入，该位与上面的密码禁用期有所不同，密码禁用期超过后用户只要修改密码后就可以重新登入，而账户过期永远无法登入，除非管理员解封。</p> <p>保留位，该字段保留未用。</p> <p><strong>group文件的配置规则如下：</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@compute demo]# tail -1 /etc/group
user4:x:1013:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>组名：密码占位符：组ID：以该组为额外组的组内用户</p> <p>有上面这些基本知识后现在正式开始手动添加用户</p> <p>首先添加账户：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1 [root@compute demo]# echo &quot;user5:x:5000:5000::/home/user5:/bin/bash&quot; &gt;&gt; /etc/passwd
2 [root@compute demo]# tail -1 !$
3 tail -1 /etc/passwd
4 user5:x:5000:5000::/home/user5:/bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>添加账户密码（不同的Linux发行版系统使用的密码加密方式不同，加密方式的查看方式见上面红色字体，在我的电脑上为6号加密方式即SHA-512加密）：</p> <p>目前我还没找到能加密sha512（带salt）的加密工具，于是自己用c写了一个加密程序。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> 1 #define _XOPEN_SOURCE
 2 #include &lt;unistd.h&gt;
 3 #include &lt;stdio.h&gt;
 4 #include &lt;string.h&gt;
 5 int main()
 6 {
 7         char salt[20]={0};
 8         char key[100]={0};
 9         char tmp[20];
10         int id;
11         int length=0;
12         printf(&quot;please choose the encrypt algorithm:\n&quot;);
13         printf(&quot;1 : MD5\n&quot;
14                &quot;5 : SHA-256\n&quot;
15                &quot;6 : SHA-512\n&quot;);
16         scanf(&quot;%d&quot;,&amp;id);
17         salt[0]='$';
18         salt[2]='$';
19         salt[1]=id+'0';
20 
21         printf(&quot;please input salt(no more than 8 characters):&quot;);
22         scanf(&quot;%s&quot;,tmp);
23         length=strlen(tmp);
24         strcpy(salt+3, tmp);
25         salt[3+length]='$';
26 
27         printf(&quot;please input the key:&quot;);
28         scanf(&quot;%s&quot;,key);
29 
30         printf(&quot;%s\n&quot;,crypt(key, salt));
31         return 0;
32 }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>编译命令：</p> <p>[root@compute demo]# gcc encrypt.c -o encrypt -lcrypt
注：上面的encrypt.c为源文件，encrypt为输出程序，-lcrypt为用到的加密库。</p> <p>现在可以用这个程序来生成密码了。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@compute demo]# ./encrypt 
please choose the encrypt algorithm:
1 : MD5
5 : SHA-256
6 : SHA-512
6
please input salt(no more than 8 characters):1234abcd
please input the key:password
$6$1234abcd$RQ0et4pXYf990f./lJNcInZtANef5Mw0GSA0ftwDYKZEViukdnf9bM/PALLnGuSv91L/9bWBkFBQM4Os8CMYk/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>这里我们运用自己写的加密工具生成了一个salt为1234abcd，密码为password的采用SHA-512加密的 加密密码 $6<mjx-container jax="CHTML" class="MathJax"><mjx-math class=" MJX-TEX"><mjx-mn class="mjx-n"><mjx-c c="1"></mjx-c><mjx-c c="2"></mjx-c><mjx-c c="3"></mjx-c><mjx-c c="4"></mjx-c></mjx-mn><mjx-mi class="mjx-i"><mjx-c c="a"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="b"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="c"></mjx-c></mjx-mi><mjx-mi class="mjx-i"><mjx-c c="d"></mjx-c></mjx-mi></mjx-math></mjx-container>RQ0et4pXYf990f./lJNcInZtANef5Mw0GSA0ftwDYKZEViukdnf9bM/PALLnGuSv91L/9bWBkFBQM4Os8CMYk/ 。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1 [root@compute demo]# echo 'user5:$6$1234abcd$RQ0et4pXYf990f./lJNcInZtANef5Mw0GSA0ftwDYKZEViukdnf9bM/PALLnGuSv91L/9bWBkFBQM4Os8CMYk/:17374:0:99999:7:::' &gt;&gt; /etc/shadow
2 [root@compute demo]# tail -1 !$
3 tail -1 /etc/shadow
4 user5:$6$1234abcd$RQ0et4pXYf990f./lJNcInZtANef5Mw0GSA0ftwDYKZEViukdnf9bM/PALLnGuSv91L/9bWBkFBQM4Os8CMYk/:17374:0:99999:7:::
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>到此为止添加密码这一步已经做完。</p> <p>在group中加入其基本组</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@compute demo]# echo &quot;user5:x:5000:&quot; &gt;&gt; /etc/group
[root@compute demo]# tail -1 /etc/group
user5:x:5000:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>最后在gshadow中添加组信息（为了方便起见，我们暂时不添加组密码，有兴趣的同学可以自己添加，添加方式和添加用户密码相同，把加密后的密码替换！即可）：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1 [root@compute demo]# echo &quot;user5:!::&quot; &gt;&gt; /etc/gshadow
2 -bash: :: unrecognized history modifier
3 [root@compute demo]# echo 'user5:!::' &gt;&gt; /etc/gshadow
4 [root@compute demo]# tail -1 /etc/gshadow
5 user5:!::
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>注：上面可以看到我使用echo &quot;user5:!::&quot; &gt;&gt; /etc/gshadow命令时报错了，原因是bash支持命令展开，而 ! 是展开的一种修饰前缀，因此bash试图将 :: 进行展开，这里我们将双引号改为单引号即可，因为单引号为强引用，明确告诉bash不需要对字符串中的内容进行展开。</p> <p>最后一步，复制家目录：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code> 1 [root@compute demo]# cp -r /etc/skel /home/user5
 2 [root@compute demo]# ll /home/
 3 总用量 496
 4 drwx------.  3 user3   root      4096 7月  28 06:31 user3
 5 drwx------.  3 user4   user4     4096 7月  28 00:29 user4
 6 drwxr-xr-x.  3 root    root      4096 7月  30 01:48 user5
 7 [root@compute demo]# chown -R user5:user5 /home/user5
 8 [root@compute demo]# chmod -R --reference=/home/user4 /home/user5
 9 [root@compute demo]# ll /home/
10 总用量 496
11 drwx------.  3 user3   root      4096 7月  28 06:31 user3
12 drwx------.  3 user4   user4     4096 7月  28 00:29 user4
13 drwx------.  3 user5   user5     4096 7月  30 01:48 user5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>到此为止，user5用户就添加完成了，现在可以用user5用户登入了，密码就是刚才设置的password</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1 [root@compute demo]# su -l user5
2 上一次登录：日 7月 30 01:53:57 CST 2017pts/1 上
3 [user5@compute ~]$ touch hello.c
4 [user5@compute ~]$ ll
5 总用量 0
6 -rw-rw-r--. 1 user5 user5 0 7月  30 01:54 hello.c
7 [user5@compute ~]$ pwd
8 /home/user5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="添加批量用户"><a href="#添加批量用户" class="header-anchor">#</a> 添加批量用户</h2> <p>添加和删除用户对每位Linux系统管理员都是轻而易举的事，比较棘手的是如果要添加几十个、上百个甚至上千个用户时，我们不太可能还使用useradd一个一个地添加，必然要找一种简便的创建大量用户的方法。Linux系统提供了创建大量用户的工具，可以让您立即创建大量用户，方法如下：</p> <p>（1）先编辑一个文本用户文件。</p> <p>每一列按照/etc/passwd密码文件的格式书写，要注意每个用户的用户名、UID、宿主目录都不可以相同，其中密码栏可以留做空白或输入x号。一个范例文件user.txt内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>user001::600:100:user:/home/user001:/bin/bash
user002::601:100:user:/home/user002:/bin/bash
user003::602:100:user:/home/user003:/bin/bash
user004::603:100:user:/home/user004:/bin/bash
user005::604:100:user:/home/user005:/bin/bash
user006::605:100:user:/home/user006:/bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>（2）以root身份执行命令</p> <p>/usr/sbin/newusers，从刚创建的用户文件user.txt中导入数据，创建用户：</p> <p><code># newusers &lt; user.txt</code></p> <p>然后可以执行命令 vipw 或 vi /etc/passwd 检查 /etc/passwd 文件是否已经出现这些用户的数据，并且用户的宿主目录是否已经创建。</p> <p>（3）执行命令/usr/sbin/pwunconv。</p> <p>将 /etc/shadow 产生的 shadow 密码解码，然后回写到 /etc/passwd 中，并将/etc/shadow的shadow密码栏删掉。这是为了方便下一步的密码转换工作，即先取消 shadow password 功能。</p> <p><code># pwunconv</code></p> <p>（4）编辑每个用户的密码对照文件。</p> <p>范例文件 passwd.txt 内容如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>user001:密码
user002:密码
user003:密码
user004:密码
user005:密码
user006:密码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>（5）以root身份执行命令 /usr/sbin/chpasswd。</p> <p>创建用户密码，chpasswd 会将经过 /usr/bin/passwd 命令编码过的密码写入 /etc/passwd 的密码栏。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code># chpasswd &lt; passwd.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>（6）确定密码经编码写入/etc/passwd的密码栏后。
执行命令 /usr/sbin/pwconv 将密码编码为 shadow password，并将结果写入 /etc/shadow。</p> <p><code># pwconv</code>
这样就完成了大量用户的创建了，之后您可以到/home下检查这些用户宿主目录的权限设置是否都正确，并登录验证用户密码是否正确。</p> <h1 id="文件系统文件权限分类"><a href="#文件系统文件权限分类" class="header-anchor">#</a> 文件系统文件权限分类</h1> <ol><li></li></ol> <p>权限：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>r: readable，可读

w: writable, 可写

x：excutable, 可执行
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>2.例：   drwxr-xr-x    d表示是目录文件。</p> <p>三类用户：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
        属主：owner, u  ： rwx，表示目录文件的拥有者有读、写和执行权限。

        属组：group, g  ： r-x，表示属于此组的用户对此目录文件有读和执行权限。

        其它：other, o  ： r-x，表示其他用户对此目录文件有读和执行权限。        

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>3.对文件来说：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>
        r：可获取文件的数据；

        w：可修改文件的数据；

        x：可将此文件运行为进程
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>4.对目录来说：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>        r：可使用ls命令获取其下的所有文件列表；但不可以使用“ls -l”去获取详细信息，也不可以              cd至此目录中；

        w：可修改此目录下的文件列表， 即可以在此目录下创建或删除文件；

        x：可以使用&quot;ls -l“命令来获取其下的文件的详细属性信息，也可cd至此目录中；
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>5.权限组合机制：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>      以owner为例：

            --- 000   0

            --x  001   1

            -w-  010   2

            -wx  011   3

            r--  100   4 

            r-x  101   5

            rw-  110   6

            rwx  111   7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h1 id="权限的管理"><a href="#权限的管理" class="header-anchor">#</a> 权限的管理</h1> <p>1.用户类型（标识符）：u：属主   g：属组   o：其它    a: 所有</p> <p>2.chmod [OPTION]... MODE[,MODE]... FILE...</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>        赋权表示法：直接操作一类用户的所有权限位rwx；

            u=

            g=

            o=

            a=

            两类用户权限相同：ug=, go=

            不同类的用户权限不同：u=,g=,o=

        授权表示法：操作一类用户一位或多位权限；

            u+, u-

            g+, g-

            o+, o-

            a+, a-

              两类用户权限收授机制相同：ug+, ug-, ...

              不同类的用户权限不同：u+,g+,o+
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>3.chmod [OPTION]...</p> <div class="language- extra-class"><pre><code>    --reference=RFILE FILE…   参照某个文件的权限来进行授权操作

    -R,--recursive：递归修改

     NOTE：普通用户仅能修改属主为自己的那些文件的权限；root可以更改所有用户
</code></pre></div><p>4.chown命令: 更改文件目录的所有者，也可以更改所属组</p> <p>利用 chown 将指定文件的拥有者改为指定的用户或组，用户可以是用户名或者用户ID；组可以是组名或者组ID；文件是以空格分开的要改变权限的文件列表，支持通配符。</p> <p>一般来说，这个指令只有是由系统管理者(root)所使用，一般使用者没有权限可以改变别人的文件拥有者，也没有权限可以自己的文件拥有者改设为别人。只有系统管理者(root)才有这样的权限。</p> <p>语法</p> <p>chown [-cfhvR] [--help] [--version] user[:group] file...</p> <p>参数 :</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>user : 新的文件拥有者的使用者 ID
group : 新的文件拥有者的使用者群体(group)
-c : 若该文件拥有者确实已经更改，才显示其更改动作
-f : 若该文件拥有者无法被更改也不要显示错误讯息
-h : 只对于连结(link)进行变更，而非该 link 真正指向的文件
-v : 显示拥有者变更的详细资料
-R : 对目前目录下的所有文件与子目录进行相同的拥有者变更(即以递回的方式逐个变更)
--help : 显示辅助说明
--version : 显示版本
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>实例</p> <p>将文件 file1.txt 的拥有者设为 users 群体的使用者 jessie :</p> <p><code>chown users:jessie file1.txt</code></p> <p>将目前目录下的所有文件与子目录的拥有者皆设为 users 群体的使用者 lamport :</p> <p><code>chown -R lamport:users *</code></p> <p>5.chgrp命令: 更改文件目录的所属组</p> <p>6.umask：显示或设定文件模式掩码</p> <div class="language- extra-class"><pre><code>     文件默认权限：666-umask

     目录默认权限：777-umask

     注意：之所以文件用666去减，表示文件默认不能有执行权限；如果减得的结果中，u,g或o有执行权限时，则需要加1；

     显示当前用户的umask：umask

     设定：umask MASK

     注意：此设定仅对当前shell进程有效； 
</code></pre></div></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/gocifer/GLog/edit/master/docs/GTech：Linux基础/01.Linux 基础/12.用户与文件.md" target="_blank" rel="noopener noreferrer">编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020/07/31, 11:07:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/c1aebf/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">
        系统管理
      </div></a> <a href="/pages/ea0f0b/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">
        用户与用户组管理
      </div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/c1aebf/" class="prev">系统管理</a></span> <span class="next"><a href="/pages/ea0f0b/">用户与用户组管理</a>
        →
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/GTech%EF%BC%9ALinux%E5%9F%BA%E7%A1%80/04.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9D%82%E8%B0%88/07.Linux-4.4-x86_64%20%E5%86%85%E6%A0%B8%E9%85%8D%E7%BD%AE/"><div></div></a> <span></span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/9b58a3/"><div>index</div></a> <span>07-30</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/98238b/"><div>基本命令</div></a> <span>07-30</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="icons"><a href="mailto:blinderjay@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/gocifer" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
     | Copyright © 2020-2020
    <span>gocifer | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/assets/js/app.5bb0b44e.js" defer></script><script src="/assets/js/2.717babc4.js" defer></script><script src="/assets/js/23.e7c42960.js" defer></script>
  </body>
</html>