<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>LVM | Gocifer&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="云原生技术博客，专注于计算机、网络、云计算相关技术的学习和总结。Linux，网络，运维，云计算，golang，云原生，网络安全等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.1ba410de.css" as="style"><link rel="preload" href="/assets/js/app.5bb0b44e.js" as="script"><link rel="preload" href="/assets/js/2.717babc4.js" as="script"><link rel="preload" href="/assets/js/48.d1436f7a.js" as="script"><link rel="prefetch" href="/assets/js/10.3e114544.js"><link rel="prefetch" href="/assets/js/11.4161c730.js"><link rel="prefetch" href="/assets/js/12.e2b56866.js"><link rel="prefetch" href="/assets/js/13.26d11d5a.js"><link rel="prefetch" href="/assets/js/14.101242cd.js"><link rel="prefetch" href="/assets/js/15.aeeabc5e.js"><link rel="prefetch" href="/assets/js/16.501e71d2.js"><link rel="prefetch" href="/assets/js/17.25c53b09.js"><link rel="prefetch" href="/assets/js/18.76227f51.js"><link rel="prefetch" href="/assets/js/19.9d5c5e01.js"><link rel="prefetch" href="/assets/js/20.341b2b12.js"><link rel="prefetch" href="/assets/js/21.114174e0.js"><link rel="prefetch" href="/assets/js/22.c1e44e04.js"><link rel="prefetch" href="/assets/js/23.e7c42960.js"><link rel="prefetch" href="/assets/js/24.f1f7cdcf.js"><link rel="prefetch" href="/assets/js/25.5967fc32.js"><link rel="prefetch" href="/assets/js/26.41a226b5.js"><link rel="prefetch" href="/assets/js/27.bb0aa905.js"><link rel="prefetch" href="/assets/js/28.cfe8776c.js"><link rel="prefetch" href="/assets/js/29.cc05a8f8.js"><link rel="prefetch" href="/assets/js/3.cd13fc02.js"><link rel="prefetch" href="/assets/js/30.d5b46292.js"><link rel="prefetch" href="/assets/js/31.c027a203.js"><link rel="prefetch" href="/assets/js/32.442e6531.js"><link rel="prefetch" href="/assets/js/33.82b70710.js"><link rel="prefetch" href="/assets/js/34.b8848f81.js"><link rel="prefetch" href="/assets/js/35.bc60de53.js"><link rel="prefetch" href="/assets/js/36.1f2a2d01.js"><link rel="prefetch" href="/assets/js/37.fcb90e28.js"><link rel="prefetch" href="/assets/js/38.b14fdbcd.js"><link rel="prefetch" href="/assets/js/39.851097e7.js"><link rel="prefetch" href="/assets/js/4.be18f558.js"><link rel="prefetch" href="/assets/js/40.f527e03d.js"><link rel="prefetch" href="/assets/js/41.d76d2a9f.js"><link rel="prefetch" href="/assets/js/42.951864f6.js"><link rel="prefetch" href="/assets/js/43.4bf254e0.js"><link rel="prefetch" href="/assets/js/44.6fef7953.js"><link rel="prefetch" href="/assets/js/45.0adf5159.js"><link rel="prefetch" href="/assets/js/46.b40047ba.js"><link rel="prefetch" href="/assets/js/47.b089bd7c.js"><link rel="prefetch" href="/assets/js/49.a174fba0.js"><link rel="prefetch" href="/assets/js/5.780ad7e3.js"><link rel="prefetch" href="/assets/js/50.18fc3240.js"><link rel="prefetch" href="/assets/js/51.76715a85.js"><link rel="prefetch" href="/assets/js/52.08f7eb24.js"><link rel="prefetch" href="/assets/js/53.e6230a91.js"><link rel="prefetch" href="/assets/js/54.f0cdd834.js"><link rel="prefetch" href="/assets/js/55.c24858ef.js"><link rel="prefetch" href="/assets/js/56.ee51e524.js"><link rel="prefetch" href="/assets/js/57.dd385ae8.js"><link rel="prefetch" href="/assets/js/58.9ad6ea89.js"><link rel="prefetch" href="/assets/js/59.c08ecfda.js"><link rel="prefetch" href="/assets/js/6.cee5b248.js"><link rel="prefetch" href="/assets/js/60.75e0eee8.js"><link rel="prefetch" href="/assets/js/61.3a226ab8.js"><link rel="prefetch" href="/assets/js/62.01a2bf4b.js"><link rel="prefetch" href="/assets/js/63.8c76681d.js"><link rel="prefetch" href="/assets/js/64.db33256b.js"><link rel="prefetch" href="/assets/js/65.2e1ebaab.js"><link rel="prefetch" href="/assets/js/66.e094042d.js"><link rel="prefetch" href="/assets/js/67.dbaea1c1.js"><link rel="prefetch" href="/assets/js/68.e235e7aa.js"><link rel="prefetch" href="/assets/js/69.4172339e.js"><link rel="prefetch" href="/assets/js/7.6e9c4628.js"><link rel="prefetch" href="/assets/js/70.b7584039.js"><link rel="prefetch" href="/assets/js/71.f49e21cb.js"><link rel="prefetch" href="/assets/js/72.968c2e04.js"><link rel="prefetch" href="/assets/js/73.72c69fef.js"><link rel="prefetch" href="/assets/js/74.f1f00f31.js"><link rel="prefetch" href="/assets/js/75.849d225f.js"><link rel="prefetch" href="/assets/js/76.cf2cfd7f.js"><link rel="prefetch" href="/assets/js/77.927cbb1b.js"><link rel="prefetch" href="/assets/js/78.0e032591.js"><link rel="prefetch" href="/assets/js/79.30db201e.js"><link rel="prefetch" href="/assets/js/8.f6bc7e45.js"><link rel="prefetch" href="/assets/js/80.9c3e2106.js"><link rel="prefetch" href="/assets/js/81.b5a3857b.js"><link rel="prefetch" href="/assets/js/9.803a3433.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1ba410de.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/GL1.png" alt="Gocifer's blog" class="logo"> <span class="site-name can-hide">Gocifer's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🐧  Linux 学习" class="dropdown-title"><a href="/Linux/" class="link-title">🐧  Linux 学习</a> <span class="title" style="display:none;">🐧  Linux 学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux 基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/ac33e1/.html" class="nav-link">常用命令</a></li><li class="dropdown-subitem"><a href="/pages/ac33e1/.html" class="nav-link">基础原理</a></li><li class="dropdown-subitem"><a href="/pages/ac33e1/.html" class="nav-link">基础服务</a></li><li class="dropdown-subitem"><a href="/pages/ac33e1/.html" class="nav-link">疑难杂症</a></li></ul></li><li class="dropdown-item"><h4>Linux 提高</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/LinuxAdvanced/" class="nav-link">《GTech：Linux&amp;Unix 运维》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 编程》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 进阶》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🕸️  网络·计算·安全" class="dropdown-title"><a href="/Linux/" class="link-title">🕸️  网络·计算·安全</a> <span class="title" style="display:none;">🕸️  网络·计算·安全</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GTech：交换与路由》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：网络安全》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：物联网》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：云计算》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🌩️  云原生" class="dropdown-title"><a href="/Linux/" class="link-title">🌩️  云原生</a> <span class="title" style="display:none;">🌩️  云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GCNCF：CNCF Conf 会议摘录》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Serverless》 </a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Service Mesh》 </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🗒  开发笔记" class="dropdown-title"><a href="/ui/" class="link-title">🗒  开发笔记</a> <span class="title" style="display:none;">🗒  开发笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">后端</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Angular</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Flutter</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Golang 集萃</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔪  项目与实践" class="dropdown-title"><a href="/technology/" class="link-title">🔪  项目与实践</a> <span class="title" style="display:none;">🔪  项目与实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💡  杂文" class="dropdown-title"><a href="/more/" class="link-title">💡  杂文</a> <span class="title" style="display:none;">💡  杂文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⭐  收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">⭐  收藏</a> <span class="title" style="display:none;">⭐  收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">0</a></li><li class="dropdown-subitem"><a href="/pages/802a1ca6f7b71c59/" class="nav-link">软件/插件安利</a></li></ul></li><li class="dropdown-item"><h4>资源</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/eee83a9211a70f9d/" class="nav-link">云原生</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">前端/客户端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">服务端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">计算机基础知识</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📇  索引" class="dropdown-title"><a href="/archives/" class="link-title">📇  索引</a> <span class="title" style="display:none;">📇  索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏳️‍🌈  关于" class="dropdown-title"><a href="/about/" class="link-title">🏳️‍🌈  关于</a> <span class="title" style="display:none;">🏳️‍🌈  关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">个人简历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">项目经历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/gocifer/GLog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>Gocifer</h3> <span>
        云原生菜鸟
      </span></div></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🐧  Linux 学习" class="dropdown-title"><a href="/Linux/" class="link-title">🐧  Linux 学习</a> <span class="title" style="display:none;">🐧  Linux 学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux 基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/ac33e1/.html" class="nav-link">常用命令</a></li><li class="dropdown-subitem"><a href="/pages/ac33e1/.html" class="nav-link">基础原理</a></li><li class="dropdown-subitem"><a href="/pages/ac33e1/.html" class="nav-link">基础服务</a></li><li class="dropdown-subitem"><a href="/pages/ac33e1/.html" class="nav-link">疑难杂症</a></li></ul></li><li class="dropdown-item"><h4>Linux 提高</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/LinuxAdvanced/" class="nav-link">《GTech：Linux&amp;Unix 运维》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 编程》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 进阶》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🕸️  网络·计算·安全" class="dropdown-title"><a href="/Linux/" class="link-title">🕸️  网络·计算·安全</a> <span class="title" style="display:none;">🕸️  网络·计算·安全</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GTech：交换与路由》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：网络安全》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：物联网》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：云计算》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🌩️  云原生" class="dropdown-title"><a href="/Linux/" class="link-title">🌩️  云原生</a> <span class="title" style="display:none;">🌩️  云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GCNCF：CNCF Conf 会议摘录》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Serverless》 </a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Service Mesh》 </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🗒  开发笔记" class="dropdown-title"><a href="/ui/" class="link-title">🗒  开发笔记</a> <span class="title" style="display:none;">🗒  开发笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">后端</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Angular</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Flutter</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Golang 集萃</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔪  项目与实践" class="dropdown-title"><a href="/technology/" class="link-title">🔪  项目与实践</a> <span class="title" style="display:none;">🔪  项目与实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💡  杂文" class="dropdown-title"><a href="/more/" class="link-title">💡  杂文</a> <span class="title" style="display:none;">💡  杂文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⭐  收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">⭐  收藏</a> <span class="title" style="display:none;">⭐  收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">0</a></li><li class="dropdown-subitem"><a href="/pages/802a1ca6f7b71c59/" class="nav-link">软件/插件安利</a></li></ul></li><li class="dropdown-item"><h4>资源</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/eee83a9211a70f9d/" class="nav-link">云原生</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">前端/客户端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">服务端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">计算机基础知识</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📇  索引" class="dropdown-title"><a href="/archives/" class="link-title">📇  索引</a> <span class="title" style="display:none;">📇  索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏳️‍🌈  关于" class="dropdown-title"><a href="/about/" class="link-title">🏳️‍🌈  关于</a> <span class="title" style="display:none;">🏳️‍🌈  关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">个人简历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">项目经历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/gocifer/GLog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>序言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux 网络管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Shell 编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>操作系统杂谈</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/8a303f/" class="sidebar-link">磁盘加密</a></li><li><a href="/pages/7ec3c3/" class="sidebar-link">关于虚拟内存</a></li><li><a href="/pages/f9512a/" class="sidebar-link">嵌入式Linux</a></li><li><a href="/pages/9bbd13/" class="sidebar-link">在U盘安装加密的Linux系统</a></li><li><a href="/pages/9bbf2a/" class="sidebar-link">Back_Restore</a></li><li><a href="/pages/f60104/" class="sidebar-link">Gentoo安装教程</a></li><li><a href="/pages/91d102/" class="sidebar-link">Linux各发行版</a></li><li><a href="/pages/ac33e1/" aria-current="page" class="active sidebar-link">LVM</a></li><li><a href="/pages/d5acfc/" class="sidebar-link">MacOS和Linux内核的区别</a></li><li><a href="/pages/7b1bc4/" class="sidebar-link">NVIDIA 问题解决</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>虚拟化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>内核初探</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux GUI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux FAQ</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper"><div class="articleInfo-wrap" data-v-14888ed5><div class="articleInfo" data-v-14888ed5><ul class="breadcrumbs" data-v-14888ed5><li data-v-14888ed5><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-14888ed5></a></li> <li data-v-14888ed5><a href="/categories/?category=GTech%EF%BC%9ALinux%E5%9F%BA%E7%A1%80" title="分类" data-v-14888ed5>GTech：Linux基础</a></li> <li data-v-14888ed5><a href="/categories/?category=%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9D%82%E8%B0%88" title="分类" data-v-14888ed5>操作系统杂谈</a></li></ul> <div class="info" data-v-14888ed5><div title="作者" class="author iconfont icon-touxiang" data-v-14888ed5><a href="https://github.com/gocifer" target="_blank" title="作者" class="beLink" data-v-14888ed5>Gocifer</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-14888ed5><a href="javascript:;" data-v-14888ed5>2020-07-30</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><!----> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          LVM
        </h1> <div class="theme-vdoing-content content__default"><h1 id="lvm"><a href="#lvm" class="header-anchor">#</a> LVM</h1> <blockquote><p>本文由 <a href="http://ksria.com/simpread/" target="_blank" rel="noopener noreferrer">简悦 SimpRead<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 转码， 原文地址 https://www.cnblogs.com/mchina/p/linux-centos-logical-volume-manager-lvm.html</p></blockquote> <h1 id="centos-6-3-下配置-lvm（逻辑卷管理）"><a href="#centos-6-3-下配置-lvm（逻辑卷管理）" class="header-anchor">#</a> <a href="https://www.cnblogs.com/mchina/p/linux-centos-logical-volume-manager-lvm.html" target="_blank" rel="noopener noreferrer">CentOS 6.3 下配置 LVM（逻辑卷管理）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <p><strong>一、简介</strong></p> <p>LVM 是逻辑盘卷管理（Logical Volume Manager）的简称，它是 Linux 环境下对磁盘分区进行管理的一种机制，LVM 是建立在硬盘和分区之上的一个逻辑层，来提高磁盘分区管理的灵活性。</p> <p>LVM 的工作原理其实很简单，它就是通过将底层的物理硬盘抽象的封装起来，然后以逻辑卷的方式呈现给上层应用。在传统的磁盘管理机制中，我们的上层应用是直接访问文件系统，从而对底层的物理硬盘进行读取，而在 LVM 中，其通过对底层的硬盘进行封装，当我们对底层的物理硬盘进行操作时，其不再是针对于分区进行操作，而是通过一个叫做逻辑卷的东西来对其进行底层的磁盘管理操作。比如说我增加一个物理硬盘，这个时候上层的服务是感觉不到的，因为呈现给上层服务的是以逻辑卷的方式。</p> <p>LVM 最大的特点就是可以对磁盘进行动态管理。因为逻辑卷的大小是可以动态调整的，而且不会丢失现有的数据。如果我们新增加了硬盘，其也不会改变现有上层的逻辑卷。作为一个动态磁盘管理机制，逻辑卷技术大大提高了磁盘管理的灵活性。</p> <p><strong>基本的逻辑卷管理概念：</strong></p> <p>PV（Physical Volume）- 物理卷
物理卷在逻辑卷管理中处于最底层，它可以是实际物理硬盘上的<strong>分区</strong>，也可以是整个<strong>物理硬盘</strong>，也可以是 <strong>raid 设备</strong>。</p> <p>VG（Volumne Group）- 卷组
卷组建立在物理卷之上，一个卷组中至少要包括一个物理卷，在卷组建立之后可动态添加物理卷到卷组中。一个逻辑卷管理系统工程中可以只有一个卷组，也可以拥有多个卷组。</p> <p>LV（Logical Volume）- 逻辑卷
逻辑卷建立在卷组之上，卷组中的未分配空间可以用于建立新的逻辑卷，逻辑卷建立后可以动态地扩展和缩小空间。系统中的多个逻辑卷可以属于同一个卷组，也可以属于不同的多个卷组。</p> <p>关系图如下：</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413282394354.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413290825011.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>PE（Physical Extent）- 物理块</p> <p>LVM 默认使用 4MB 的 PE 区块，而 LVM 的 LV 最多仅能含有 65534 个 PE (lvm1 的格式)，因此默认的 LVM 的 LV 最大容量为 4M*65534/(1024M/G)=256G。PE 是整个 LVM 最小的储存区块，也就是说，其实我们的资料都是由写入 PE 来处理的。简单的说，这个 PE 就有点像文件系统里面的 block 大小。所以调整 PE 会影响到 LVM 的最大容量！不过，在 CentOS 6.x 以后，由于直接使用 lvm2 的各项格式功能，因此这个限制已经不存在了。</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413294737298.gif" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413298796356.gif" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>二、系统环境</strong></p> <p>**实验环境：**Oracle VM VirtualBox</p> <p>**系统平台：**CentOS release 6.3 (Final)</p> <p>**mdadm 版本：**mdadm - v3.2.6 - 25th October 2012</p> <p>**LVM 版本：**lvm2-2.02.100-8.el6.i686</p> <p>**设备类型：**分区、物理硬盘、raid 设备</p> <p><strong>三、磁盘准备</strong></p> <p>在这篇文章中，我们将模拟 raid5、分区、物理硬盘三种类型设备创建 VG，raid5 需要四块硬盘，分区和物理硬盘各一块硬盘，还有扩容时需要至少一块硬盘，所以在虚拟机里添加八块硬盘，每块 5GB.</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413305672499.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413315369427.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>四、安装 LVM 管理工具</strong></p> <p>4.1 检查系统中是否安装了 LVM 管理工具</p> <h1 id="rpm-qa-grep-lvm"><a href="#rpm-qa-grep-lvm" class="header-anchor">#</a> rpm -qa|grep lvm</h1> <p>4.2 如果未安装，则使用 yum 方式安装</p> <h1 id="yum-install-lvm"><a href="#yum-install-lvm" class="header-anchor">#</a> yum install lvm*</h1> <h1 id="rpm-qa-grep-lvm-2"><a href="#rpm-qa-grep-lvm-2" class="header-anchor">#</a> rpm -qa|grep lvm</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413322705286.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413328324157.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>五、新建一个 raid5 设备</strong></p> <p>使用 / dev/sdb, /dev/sdc, /dev/sdd, /dev/sde 四块物理硬盘做软 raid 模拟。</p> <h1 id="mdadm-c-dev-md5-ayes-l5-n3-x1-dev-sd-b-c-d-e"><a href="#mdadm-c-dev-md5-ayes-l5-n3-x1-dev-sd-b-c-d-e" class="header-anchor">#</a> mdadm -C /dev/md5 -ayes -l5 -n3 -x1 /dev/sd[b,c,d,e]</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413334578514.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413340368858.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>写入 RAID 配置文件 / etc/mdadm.conf 并做适当修改。</p> <h1 id="echo-device-dev-sd-b-c-d-e-etc-mdadm-conf"><a href="#echo-device-dev-sd-b-c-d-e-etc-mdadm-conf" class="header-anchor">#</a> echo DEVICE /dev/sd{b,c,d,e} &gt;&gt; /etc/mdadm.conf</h1> <h1 id="mdadm-ds-etc-mdadm-conf"><a href="#mdadm-ds-etc-mdadm-conf" class="header-anchor">#</a> mdadm –Ds &gt;&gt; /etc/mdadm.conf</h1> <p>详细请参考上篇文章：<a href="http://www.cnblogs.com/mchina/p/linux-centos-disk-array-software_raid.html" title="http://www.cnblogs.com/mchina/p/linux-centos-disk-array-software_raid.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/mchina/p/linux-centos-disk-array-software_raid.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>六、新建一个分区</strong></p> <p>使用 / dev/sdf 模拟分区。</p> <h1 id="fdisk-dev-sdf"><a href="#fdisk-dev-sdf" class="header-anchor">#</a> fdisk /dev/sdf</h1> <h1 id="fdisk-l-dev-sdf"><a href="#fdisk-l-dev-sdf" class="header-anchor">#</a> fdisk -l /dev/sdf</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413348795217.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413359896188.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>准备工作就绪，下面我们使用三种设备 / dev/md5、/dev/sdf1、/dev/sdg 来完成 LVM 实验。</p> <p><strong>七、创建 PV</strong></p> <h1 id="pvcreate-dev-md5-dev-sdf1-dev-sdg"><a href="#pvcreate-dev-md5-dev-sdf1-dev-sdg" class="header-anchor">#</a> pvcreate /dev/md5 /dev/sdf1 /dev/sdg</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413368645089.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413374117189.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>查看 PV</p> <h1 id="pvdisplay"><a href="#pvdisplay" class="header-anchor">#</a> pvdisplay</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413381144804.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413389111448.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>还可以使用命令 pvs 和 pvscan 查看简略信息。</p> <h1 id="pvs"><a href="#pvs" class="header-anchor">#</a> pvs</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413395043264.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413413327620.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h1 id="pvscan"><a href="#pvscan" class="header-anchor">#</a> pvscan</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413433173194.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413442861123.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>八、创建 VG</strong></p> <h1 id="vgcreate-vg0-dev-md5-dev-sdf1-dev-sdg"><a href="#vgcreate-vg0-dev-md5-dev-sdf1-dev-sdg" class="header-anchor">#</a> vgcreate vg0 /dev/md5 /dev/sdf1 /dev/sdg</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413461615196.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413479738483.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>**说明：**vg0 是创建的 VG 设备的名称，可以随便取；后面接上述的三个设备，也就是把三个设备组合成一个 vg0.</p> <p>查看 VG</p> <h1 id="vgdisplay"><a href="#vgdisplay" class="header-anchor">#</a> vgdisplay</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413486457855.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413493177227.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>说明：</strong></p> <p>VG Name　　VG 的名称</p> <p>VG Size　　VG 的总大小</p> <p>PE Size　　PE 的大小，默认为 4MB</p> <p>Total PE　　PE 的总数量，5114 x 4MB = 19.98GB</p> <p>Free PE / Size　　剩余空间大小</p> <p>同样可以使用命令 vgs 和 vgscan 查看。</p> <h1 id="vgs"><a href="#vgs" class="header-anchor">#</a> vgs</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413499114342.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413503798886.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h1 id="vgscan"><a href="#vgscan" class="header-anchor">#</a> vgscan</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413508796972.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413513325342.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>九、创建 LV</strong></p> <h1 id="lvcreate-l-5g-n-lv1-vg0"><a href="#lvcreate-l-5g-n-lv1-vg0" class="header-anchor">#</a> lvcreate -L 5G -n lv1 vg0</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413517868414.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413544115116.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>说明：</strong></p> <p>-L    指定创建的 LV 的大小
-l    指定创建的 LV 的 PE 数量
-n    LV 的名字
上面命令的意思是：从 vg0 中分出 5G 的空间给 lv1 使用</p> <p>查看 LV 的信息</p> <h1 id="lvdisplay"><a href="#lvdisplay" class="header-anchor">#</a> lvdisplay</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413550985960.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413557862103.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>说明：</strong></p> <p>LV Path　　LV 的路径，全名</p> <p>LV Name　　LV 的名字</p> <p>VG Name　　所属的 VG</p> <p>LV Size　　LV 的大小</p> <p>再来看 VG 的信息</p> <h1 id="vgs-2"><a href="#vgs-2" class="header-anchor">#</a> vgs</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413562703418.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413568018747.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>VFree 从 19.98g 减少到了 14.98g，另外的 5g 被分配到了 lv1.</p> <p><strong>十、格式化 LV</strong></p> <h1 id="mkfs-ext4-dev-vg0-lv1"><a href="#mkfs-ext4-dev-vg0-lv1" class="header-anchor">#</a> mkfs.ext4 /dev/vg0/lv1</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413576767648.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413584572819.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>十一、挂载使用</strong></p> <h1 id="mkdir-mnt-lv1"><a href="#mkdir-mnt-lv1" class="header-anchor">#</a> mkdir /mnt/lv1</h1> <h1 id="mount-dev-vg0-lv1-mnt-lv1"><a href="#mount-dev-vg0-lv1-mnt-lv1" class="header-anchor">#</a> mount /dev/vg0/lv1 /mnt/lv1/</h1> <h1 id="df-th"><a href="#df-th" class="header-anchor">#</a> df –TH</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171413591453663.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171413598798521.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>将挂载信息写入 / etc/fstab</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414007395950.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414014579335.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>十二、添加测试数据</strong></p> <p>下面我们将对 LVM 进行扩容和缩减操作，所以向 / mnt/lv1 中写入测试数据以验证 LVM 的磁盘动态管理。</p> <h1 id="touch-mnt-lv1-test-lvm-dynamic-disk"><a href="#touch-mnt-lv1-test-lvm-dynamic-disk" class="header-anchor">#</a> touch /mnt/lv1/test_lvm_dynamic.disk</h1> <h1 id="touch-mnt-lv1-test-lvm-dynamic-disk2"><a href="#touch-mnt-lv1-test-lvm-dynamic-disk2" class="header-anchor">#</a> touch /mnt/lv1/test_lvm_dynamic.disk2</h1> <h1 id="touch-mnt-lv1-test-lvm-dynamic-disk3"><a href="#touch-mnt-lv1-test-lvm-dynamic-disk3" class="header-anchor">#</a> touch /mnt/lv1/test_lvm_dynamic.disk3</h1> <h1 id="ll-mnt-lv1"><a href="#ll-mnt-lv1" class="header-anchor">#</a> ll /mnt/lv1/</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414022541681.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414031456352.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>十三、LVM 的扩容操作</strong></p> <p>LVM 最大的好处就是可以对磁盘进行动态管理，而且不会丢失现有的数据。</p> <p>假如有一天，lv1 的使用量达到了 80%，需要扩容，那我们该怎么做呢？</p> <p>因为 vg0 中还有很多剩余空间，所以我们可以从 vg0 中再分配点空间给 lv1。</p> <p><strong>13.1 LV 的扩容</strong></p> <p>查看 vg0 的剩余容量，还有 14.98g 可用。</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414038649737.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414043173810.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>对 lv1 进行扩容。</p> <h1 id="lvextend-l-1g-dev-vg0-lv1"><a href="#lvextend-l-1g-dev-vg0-lv1" class="header-anchor">#</a> lvextend -L +1G /dev/vg0/lv1</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414047706882.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414052861739.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>**说明：**在 lv1 原有的基础上增加了 1G.</p> <p>查看现在 vg0 的剩余容量，减少了 1G.</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414057238039.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414061762112.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>再查看 lv1 的容量，从 5G 增加到了 6G.</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414066143711.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414070676783.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>使用 df –TH 命令查看实际的磁盘容量。</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414075821640.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414081763456.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>发现实际容量并没有变化，因为我们的系统还不认识刚刚添加进来的磁盘的文件系统，所以还需要对文件系统进行扩容。</p> <h1 id="resize2fs-dev-vg0-lv1"><a href="#resize2fs-dev-vg0-lv1" class="header-anchor">#</a> resize2fs /dev/vg0/lv1</h1> <h1 id="df-th-2"><a href="#df-th-2" class="header-anchor">#</a> df –TH</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414088321356.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414096292701.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>现在的可用容量已经增加到了 5.9G。</p> <p>查看测试数据</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414102395585.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414108484172.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>数据正常，对 lv1 的在线动态扩容完成。</p> <p>还有一种情况，就是假如我们的 vg0 空间不够用了，怎么办？这时我们就需要对 VG 进行扩容。</p> <p><strong>13.2 VG 的扩容</strong></p> <p>VG 的扩容可以有两种方法，第一种方法是通过增加 PV 来实现，操作如下：</p> <p>A. 创建 PV，使用 / dev/sdh 来创建一个 PV。</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414113329785.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414117707087.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>B. 扩容 VG</p> <p>现在的 vg0 容量为 19.98g.</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414122078686.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414127076772.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h1 id="vgextend-vg0-dev-sdh"><a href="#vgextend-vg0-dev-sdh" class="header-anchor">#</a> vgextend vg0 /dev/sdh</h1> <h1 id="vgs-3"><a href="#vgs-3" class="header-anchor">#</a> vgs</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414132544575.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414138647459.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>现在 vg0 的容量为 24.97g, 增加了 5GB，即一块物理硬盘的容量，VG 扩容成功。</p> <p>第二种方法是通过扩展 RAID 设备的容量来间接对 VG 进行扩容。这种方法在上一篇文章中有介绍，这里不再赘述，需要注意的地方是，/dev/md5 的大小变化后，需要调整 PV 的大小，操作如下：</p> <h1 id="pvresize-dev-md5"><a href="#pvresize-dev-md5" class="header-anchor">#</a> pvresize /dev/md5</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414147861375.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414153019932.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><strong>十四、LVM 的缩减操作</strong></p> <p>缩减操作需要离线处理。</p> <p><strong>14.1 LV 的缩减</strong></p> <p>A. umount 文件系统</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414158174790.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414163955133.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>B. 缩减文件系统</p> <h1 id="resize2fs-dev-vg0-lv1-4g"><a href="#resize2fs-dev-vg0-lv1-4g" class="header-anchor">#</a> resize2fs /dev/vg0/lv1 4G</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414169261463.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414174268548.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>提示需要先运行磁盘检查。</p> <p>C. 检查磁盘</p> <h1 id="e2fsck-f-dev-vg0-lv1"><a href="#e2fsck-f-dev-vg0-lv1" class="header-anchor">#</a> e2fsck –f /dev/vg0/lv1</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414180362434.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414187233278.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>D. 再次执行缩减操作</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414195208921.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414200207007.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>缩减文件系统成功，下面缩减 LV 的大小。</p> <p>E. 缩减 LV</p> <h1 id="lvreduce-dev-vg0-lv1-l-4g"><a href="#lvreduce-dev-vg0-lv1-l-4g" class="header-anchor">#</a> lvreduce /dev/vg0/lv1 –L 4G</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414206144122.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414212863494.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>说明：Step E 和 Step D 缩减的大小必须保持一致，这里的 4G 是缩减到的大小；如果使用的是 &quot;-4G&quot;，则表示容量减少多少的意思。</p> <p>F. 挂载查看</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414220208351.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414225988695.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>LV 缩减成功。</p> <p>G. 查看测试数据</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414231769038.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414238326938.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>数据正常。</p> <p><strong>14.2 VG 的缩减</strong></p> <p>A. umount 文件系统</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414243486496.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414247702325.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>B. 查看当前的 PV 详情</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414253321197.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414258489754.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>C. 将 / dev/sdg 从 vg0 中移除</p> <h1 id="vgreduce-vg0-dev-sdg"><a href="#vgreduce-vg0-dev-sdg" class="header-anchor">#</a> vgreduce vg0 /dev/sdg</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414263644612.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414268177683.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>D. 再次查看 PV 情况</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414273322541.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414279421128.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>/dev/sdg 已经不属于 vg0 了。</p> <p>E. 查看 vg0 的情况</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414284893228.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414289118056.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>vg0 的大小减少了 5GB.</p> <p>VG 缩减成功。</p> <p><strong>十五、删除 LVM</strong></p> <p>如果要彻底的来移除 LVM 的话，需要把创建的步骤反过来操作。</p> <p>15.1 umount 文件系统</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414294267615.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414297866957.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>15.2 移除 LV</p> <h1 id="lvremove-dev-vg0-lv1"><a href="#lvremove-dev-vg0-lv1" class="header-anchor">#</a> lvremove /dev/vg0/lv1</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414302865043.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414308488615.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>15.3 移除 VG</p> <h1 id="vgremove-vg0"><a href="#vgremove-vg0" class="header-anchor">#</a> vgremove vg0</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414314268959.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414320514317.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>15.4 移除 PV</p> <h1 id="pvremove-dev-md5-dev-sdf1-dev-sdg-dev-sdh"><a href="#pvremove-dev-md5-dev-sdf1-dev-sdg-dev-sdh" class="header-anchor">#</a> pvremove /dev/md5 /dev/sdf1 /dev/sdg /dev/sdh</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414326617202.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414334573845.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>LVM 移除成功。</p> <p><strong>十六、LVM 快照（snapshot）</strong></p> <p>快照就是将当时的系统信息记录下来，就好像照相一样，未来若有任何资料变动了，则<strong>原始资料会被移动到快照区，没有被改动的区域则由快照区与档案系统共享</strong>。</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414339733404.gif" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414345513747.gif" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>LVM 系统快照区域的备份示意图 (虚线为档案系统，长虚线为快照区)</p> <p>左图为最初建立系统快照区的状况，LVM 会预留一个区域 (左图的左侧三个 PE 区块) 作为数据存放处。此时快照区内并没有任何数据，而快照区与系统区共享所有的 PE 数据， 因此你会看到快照区的内容与文件系统是一模一样的。等到系统运作一阵子后，假设 A 区域的数据被更动了 (上面右图所示)，则更动前系统会将该区域的数据移动到快照区，所以在右图的快照区被占用了一块 PE 成为 A，而其他 B 到 I 的区块则还是与文件系统共享！</p> <p>快照区与被快照的 LV 必须要在同一个 VG 里。</p> <p>16.1 建立 LV</p> <h1 id="lvcreate-l-100m-n-lv1-vg0"><a href="#lvcreate-l-100m-n-lv1-vg0" class="header-anchor">#</a> lvcreate -L 100M -n lv1 vg0</h1> <h1 id="mkfs-ext4-dev-vg0-lv1-2"><a href="#mkfs-ext4-dev-vg0-lv1-2" class="header-anchor">#</a> mkfs.ext4 /dev/vg0/lv1</h1> <h1 id="mount-dev-vg0-lv1-mnt-lv1-2"><a href="#mount-dev-vg0-lv1-mnt-lv1-2" class="header-anchor">#</a> mount /dev/vg0/lv1 /mnt/lv1/</h1> <p>16.2 写入测试数据</p> <h1 id="touch-mnt-lv1-test-lvm-snapshot-1"><a href="#touch-mnt-lv1-test-lvm-snapshot-1" class="header-anchor">#</a> touch /mnt/lv1/test_lvm_snapshot_1</h1> <h1 id="touch-mnt-lv1-test-lvm-snapshot-2"><a href="#touch-mnt-lv1-test-lvm-snapshot-2" class="header-anchor">#</a> touch /mnt/lv1/test_lvm_snapshot_2</h1> <h1 id="cp-a-etc-mnt-lv1"><a href="#cp-a-etc-mnt-lv1" class="header-anchor">#</a> cp -a /etc/ /mnt/lv1/</h1> <h1 id="cp-a-boot-mnt-lv1"><a href="#cp-a-boot-mnt-lv1" class="header-anchor">#</a> cp -a /boot/ /mnt/lv1/</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414352541363.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414359118261.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>16.3 创建快照</p> <h1 id="lvcreate-l-80m-s-n-lv1snap-dev-vg0-lv1"><a href="#lvcreate-l-80m-s-n-lv1snap-dev-vg0-lv1" class="header-anchor">#</a> lvcreate -L 80M -s -n lv1snap /dev/vg0/lv1</h1> <p>说明：为 / dev/vg0/lv1 创建一个大小为 80M，名称为 lv1snap 的快照。</p> <h1 id="lvdisplay-2"><a href="#lvdisplay-2" class="header-anchor">#</a> lvdisplay</h1> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414368018634.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414376459291.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>/dev/vg0/lv1snap 的 LV Size 为 100MB，使用量为 0.01%.</p> <p>16.4 将刚才创建的快照挂载查看</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414384117691.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414390671293.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>/mnt/lv1 和 / mnt/snapshot 是一模一样的。</p> <p>16.5 进行档案的修改操作</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414398172922.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414406148565.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>16.6 再次查看</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414415826494.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414423328123.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>snapshot 的使用量为 10.36%，原始资料有改动。</p> <p>16.7 对 snapshot 里的资料进行打包备份，准备还原</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414429573481.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414434898810.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>16.8 卸载并移除 snapshot</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414440825924.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414449893069.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>16.9 卸载并格式化 / mnt/lv1，清空数据</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414457702941.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414466295071.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>16.10 恢复数据</p> <p><a href="https://images0.cnblogs.com/blog/370046/201406/171414472397955.jpg" target="_blank" rel="noopener noreferrer"><img src="https://images0.cnblogs.com/blog/370046/201406/171414479117327.jpg" alt=""><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>可以看到，原始数据已经成功恢复。</p> <p>LVM 快照实验成功。</p> <p>**注意：**对 lv1 的修改量不能超过快照的大小，由于原始数据会被搬移到快照区，如果你的快照区不够大，若原始资料被更动的实际数据量比快照区大，那么快照区当然容纳不了，这时候快照功能会失效喔！</p> <p><strong>参考资料</strong></p> <ul><li>鸟哥的 Linux 私房菜：http://linux.vbird.org/linux_basic/0420quota.php#lvm</li> <li>羽飞博客：http://www.opsers.org/base/one-day-a-little-learning-linux-logical-volume-manager-lvm-on-the-rhel6.html</li></ul> <p><strong>CentOS 6.3 下配置软 RAID（Software RAID）</strong></p> <p><a href="http://www.cnblogs.com/mchina/p/linux-centos-disk-array-software_raid.html" target="_blank" rel="noopener noreferrer">http://www.cnblogs.com/mchina/p/linux-centos-disk-array-software_raid.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <p><strong>David Camp</strong></p> <ul><li>技术交流，请加 QQ 群：</li></ul> <p>系统运维技术分享 Ⅲ：416491168</p> <ul><li>业务合作，请联系作者 QQ：562866602</li> <li>我的微信号：mchina_tang</li> <li>给我写信：mchina_tang@qq.com</li> <li>我的地址：江苏 · 苏州</li></ul> <p>******我们永远相信，分享是一种美德 | **<strong>We Believe, Great People Share Knowledge...</strong></p></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/gocifer/GLog/edit/master/docs/GTech：Linux基础/04.操作系统杂谈/09.LVM.md" target="_blank" rel="noopener noreferrer">编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020/07/31, 11:07:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/91d102/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">
        Linux各发行版
      </div></a> <a href="/pages/d5acfc/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">
        MacOS和Linux内核的区别
      </div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/91d102/" class="prev">Linux各发行版</a></span> <span class="next"><a href="/pages/d5acfc/">MacOS和Linux内核的区别</a>
        →
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/GTech%EF%BC%9ALinux%E5%9F%BA%E7%A1%80/04.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9D%82%E8%B0%88/07.Linux-4.4-x86_64%20%E5%86%85%E6%A0%B8%E9%85%8D%E7%BD%AE/"><div></div></a> <span></span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/9b58a3/"><div>index</div></a> <span>07-30</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/98238b/"><div>基本命令</div></a> <span>07-30</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="icons"><a href="mailto:blinderjay@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/gocifer" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
     | Copyright © 2020-2020
    <span>gocifer | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/assets/js/app.5bb0b44e.js" defer></script><script src="/assets/js/2.717babc4.js" defer></script><script src="/assets/js/48.d1436f7a.js" defer></script>
  </body>
</html>