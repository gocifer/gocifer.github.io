<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gentoo安装教程 | Gocifer&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="云原生技术博客，专注于计算机、网络、云计算相关技术的学习和总结。Linux，网络，运维，云计算，golang，云原生，网络安全等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.1ba410de.css" as="style"><link rel="preload" href="/assets/js/app.5bb0b44e.js" as="script"><link rel="preload" href="/assets/js/2.717babc4.js" as="script"><link rel="preload" href="/assets/js/45.0adf5159.js" as="script"><link rel="prefetch" href="/assets/js/10.3e114544.js"><link rel="prefetch" href="/assets/js/11.4161c730.js"><link rel="prefetch" href="/assets/js/12.e2b56866.js"><link rel="prefetch" href="/assets/js/13.26d11d5a.js"><link rel="prefetch" href="/assets/js/14.101242cd.js"><link rel="prefetch" href="/assets/js/15.aeeabc5e.js"><link rel="prefetch" href="/assets/js/16.501e71d2.js"><link rel="prefetch" href="/assets/js/17.25c53b09.js"><link rel="prefetch" href="/assets/js/18.76227f51.js"><link rel="prefetch" href="/assets/js/19.9d5c5e01.js"><link rel="prefetch" href="/assets/js/20.341b2b12.js"><link rel="prefetch" href="/assets/js/21.114174e0.js"><link rel="prefetch" href="/assets/js/22.c1e44e04.js"><link rel="prefetch" href="/assets/js/23.e7c42960.js"><link rel="prefetch" href="/assets/js/24.f1f7cdcf.js"><link rel="prefetch" href="/assets/js/25.5967fc32.js"><link rel="prefetch" href="/assets/js/26.41a226b5.js"><link rel="prefetch" href="/assets/js/27.bb0aa905.js"><link rel="prefetch" href="/assets/js/28.cfe8776c.js"><link rel="prefetch" href="/assets/js/29.cc05a8f8.js"><link rel="prefetch" href="/assets/js/3.cd13fc02.js"><link rel="prefetch" href="/assets/js/30.d5b46292.js"><link rel="prefetch" href="/assets/js/31.c027a203.js"><link rel="prefetch" href="/assets/js/32.442e6531.js"><link rel="prefetch" href="/assets/js/33.82b70710.js"><link rel="prefetch" href="/assets/js/34.b8848f81.js"><link rel="prefetch" href="/assets/js/35.bc60de53.js"><link rel="prefetch" href="/assets/js/36.1f2a2d01.js"><link rel="prefetch" href="/assets/js/37.fcb90e28.js"><link rel="prefetch" href="/assets/js/38.b14fdbcd.js"><link rel="prefetch" href="/assets/js/39.851097e7.js"><link rel="prefetch" href="/assets/js/4.be18f558.js"><link rel="prefetch" href="/assets/js/40.f527e03d.js"><link rel="prefetch" href="/assets/js/41.d76d2a9f.js"><link rel="prefetch" href="/assets/js/42.951864f6.js"><link rel="prefetch" href="/assets/js/43.4bf254e0.js"><link rel="prefetch" href="/assets/js/44.6fef7953.js"><link rel="prefetch" href="/assets/js/46.b40047ba.js"><link rel="prefetch" href="/assets/js/47.b089bd7c.js"><link rel="prefetch" href="/assets/js/48.d1436f7a.js"><link rel="prefetch" href="/assets/js/49.a174fba0.js"><link rel="prefetch" href="/assets/js/5.780ad7e3.js"><link rel="prefetch" href="/assets/js/50.18fc3240.js"><link rel="prefetch" href="/assets/js/51.76715a85.js"><link rel="prefetch" href="/assets/js/52.08f7eb24.js"><link rel="prefetch" href="/assets/js/53.e6230a91.js"><link rel="prefetch" href="/assets/js/54.f0cdd834.js"><link rel="prefetch" href="/assets/js/55.c24858ef.js"><link rel="prefetch" href="/assets/js/56.ee51e524.js"><link rel="prefetch" href="/assets/js/57.dd385ae8.js"><link rel="prefetch" href="/assets/js/58.9ad6ea89.js"><link rel="prefetch" href="/assets/js/59.c08ecfda.js"><link rel="prefetch" href="/assets/js/6.cee5b248.js"><link rel="prefetch" href="/assets/js/60.75e0eee8.js"><link rel="prefetch" href="/assets/js/61.3a226ab8.js"><link rel="prefetch" href="/assets/js/62.01a2bf4b.js"><link rel="prefetch" href="/assets/js/63.8c76681d.js"><link rel="prefetch" href="/assets/js/64.db33256b.js"><link rel="prefetch" href="/assets/js/65.2e1ebaab.js"><link rel="prefetch" href="/assets/js/66.e094042d.js"><link rel="prefetch" href="/assets/js/67.dbaea1c1.js"><link rel="prefetch" href="/assets/js/68.e235e7aa.js"><link rel="prefetch" href="/assets/js/69.4172339e.js"><link rel="prefetch" href="/assets/js/7.6e9c4628.js"><link rel="prefetch" href="/assets/js/70.b7584039.js"><link rel="prefetch" href="/assets/js/71.f49e21cb.js"><link rel="prefetch" href="/assets/js/72.968c2e04.js"><link rel="prefetch" href="/assets/js/73.72c69fef.js"><link rel="prefetch" href="/assets/js/74.f1f00f31.js"><link rel="prefetch" href="/assets/js/75.849d225f.js"><link rel="prefetch" href="/assets/js/76.cf2cfd7f.js"><link rel="prefetch" href="/assets/js/77.927cbb1b.js"><link rel="prefetch" href="/assets/js/78.0e032591.js"><link rel="prefetch" href="/assets/js/79.30db201e.js"><link rel="prefetch" href="/assets/js/8.f6bc7e45.js"><link rel="prefetch" href="/assets/js/80.9c3e2106.js"><link rel="prefetch" href="/assets/js/81.b5a3857b.js"><link rel="prefetch" href="/assets/js/9.803a3433.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1ba410de.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/GL1.png" alt="Gocifer's blog" class="logo"> <span class="site-name can-hide">Gocifer's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🐧  Linux 学习" class="dropdown-title"><a href="/Linux/" class="link-title">🐧  Linux 学习</a> <span class="title" style="display:none;">🐧  Linux 学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux 基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f60104/.html" class="nav-link">常用命令</a></li><li class="dropdown-subitem"><a href="/pages/f60104/.html" class="nav-link">基础原理</a></li><li class="dropdown-subitem"><a href="/pages/f60104/.html" class="nav-link">基础服务</a></li><li class="dropdown-subitem"><a href="/pages/f60104/.html" class="nav-link">疑难杂症</a></li></ul></li><li class="dropdown-item"><h4>Linux 提高</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/LinuxAdvanced/" class="nav-link">《GTech：Linux&amp;Unix 运维》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 编程》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 进阶》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🕸️  网络·计算·安全" class="dropdown-title"><a href="/Linux/" class="link-title">🕸️  网络·计算·安全</a> <span class="title" style="display:none;">🕸️  网络·计算·安全</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GTech：交换与路由》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：网络安全》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：物联网》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：云计算》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🌩️  云原生" class="dropdown-title"><a href="/Linux/" class="link-title">🌩️  云原生</a> <span class="title" style="display:none;">🌩️  云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GCNCF：CNCF Conf 会议摘录》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Serverless》 </a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Service Mesh》 </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🗒  开发笔记" class="dropdown-title"><a href="/ui/" class="link-title">🗒  开发笔记</a> <span class="title" style="display:none;">🗒  开发笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">后端</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Angular</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Flutter</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Golang 集萃</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔪  项目与实践" class="dropdown-title"><a href="/technology/" class="link-title">🔪  项目与实践</a> <span class="title" style="display:none;">🔪  项目与实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💡  杂文" class="dropdown-title"><a href="/more/" class="link-title">💡  杂文</a> <span class="title" style="display:none;">💡  杂文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⭐  收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">⭐  收藏</a> <span class="title" style="display:none;">⭐  收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">0</a></li><li class="dropdown-subitem"><a href="/pages/802a1ca6f7b71c59/" class="nav-link">软件/插件安利</a></li></ul></li><li class="dropdown-item"><h4>资源</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/eee83a9211a70f9d/" class="nav-link">云原生</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">前端/客户端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">服务端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">计算机基础知识</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📇  索引" class="dropdown-title"><a href="/archives/" class="link-title">📇  索引</a> <span class="title" style="display:none;">📇  索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏳️‍🌈  关于" class="dropdown-title"><a href="/about/" class="link-title">🏳️‍🌈  关于</a> <span class="title" style="display:none;">🏳️‍🌈  关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">个人简历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">项目经历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/gocifer/GLog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/xugaoyi/image_store/blog/20200103123203.jpg"> <div class="blogger-info"><h3>Gocifer</h3> <span>
        云原生菜鸟
      </span></div></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🐧  Linux 学习" class="dropdown-title"><a href="/Linux/" class="link-title">🐧  Linux 学习</a> <span class="title" style="display:none;">🐧  Linux 学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>Linux 基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/f60104/.html" class="nav-link">常用命令</a></li><li class="dropdown-subitem"><a href="/pages/f60104/.html" class="nav-link">基础原理</a></li><li class="dropdown-subitem"><a href="/pages/f60104/.html" class="nav-link">基础服务</a></li><li class="dropdown-subitem"><a href="/pages/f60104/.html" class="nav-link">疑难杂症</a></li></ul></li><li class="dropdown-item"><h4>Linux 提高</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/note/LinuxAdvanced/" class="nav-link">《GTech：Linux&amp;Unix 运维》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 编程》</a></li><li class="dropdown-subitem"><a href="/note/es6/" class="nav-link">《GTech：Linux&amp;Unix 进阶》</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🕸️  网络·计算·安全" class="dropdown-title"><a href="/Linux/" class="link-title">🕸️  网络·计算·安全</a> <span class="title" style="display:none;">🕸️  网络·计算·安全</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GTech：交换与路由》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：网络安全》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：物联网》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GTech：云计算》</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🌩️  云原生" class="dropdown-title"><a href="/Linux/" class="link-title">🌩️  云原生</a> <span class="title" style="display:none;">🌩️  云原生</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/note/LinuxAdvanced/" class="nav-link">《GCNCF：CNCF Conf 会议摘录》</a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Serverless》 </a></li><li class="dropdown-item"><!----> <a href="/note/es6/" class="nav-link">《GCNCF：Service Mesh》 </a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🗒  开发笔记" class="dropdown-title"><a href="/ui/" class="link-title">🗒  开发笔记</a> <span class="title" style="display:none;">🗒  开发笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/8309a5b876fc95e3/" class="nav-link">后端</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Angular</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Flutter</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">数据结构与算法</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">Golang 集萃</a></li><li class="dropdown-item"><!----> <a href="/pages/0a83b083bdf257cb/" class="nav-link">其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🔪  项目与实践" class="dropdown-title"><a href="/technology/" class="link-title">🔪  项目与实践</a> <span class="title" style="display:none;">🔪  项目与实践</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/9a7ee40fc232253e/" class="nav-link">技术文档</a></li><li class="dropdown-item"><!----> <a href="/pages/4c778760be26d8b3/" class="nav-link">GitHub技巧</a></li><li class="dropdown-item"><!----> <a href="/pages/117708e0af7f0bd9/" class="nav-link">Nodejs</a></li><li class="dropdown-item"><!----> <a href="/pages/41f87d890d0a02af/" class="nav-link">博客搭建</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="💡  杂文" class="dropdown-title"><a href="/more/" class="link-title">💡  杂文</a> <span class="title" style="display:none;">💡  杂文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">学习</a></li><li class="dropdown-item"><!----> <a href="/pages/aea6571b7a8bae86/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/pages/2d615df9a36a98ed/" class="nav-link">心情杂货</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="⭐  收藏" class="dropdown-title"><a href="/pages/beb6c0bd8a66cea6/" class="link-title">⭐  收藏</a> <span class="title" style="display:none;">⭐  收藏</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>工具</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/8143cc480faf9a11/" class="nav-link">0</a></li><li class="dropdown-subitem"><a href="/pages/802a1ca6f7b71c59/" class="nav-link">软件/插件安利</a></li></ul></li><li class="dropdown-item"><h4>资源</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/pages/eee83a9211a70f9d/" class="nav-link">云原生</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">前端/客户端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">服务端</a></li><li class="dropdown-subitem"><a href="/pages/12df8ace52d493f6/" class="nav-link">计算机基础知识</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📇  索引" class="dropdown-title"><a href="/archives/" class="link-title">📇  索引</a> <span class="title" style="display:none;">📇  索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="🏳️‍🌈  关于" class="dropdown-title"><a href="/about/" class="link-title">🏳️‍🌈  关于</a> <span class="title" style="display:none;">🏳️‍🌈  关于</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f2a556/" class="nav-link">个人简历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">项目经历</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div> <a href="https://github.com/gocifer/GLog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>序言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux 基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux 网络管理</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Shell 编程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>操作系统杂谈</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/8a303f/" class="sidebar-link">磁盘加密</a></li><li><a href="/pages/7ec3c3/" class="sidebar-link">关于虚拟内存</a></li><li><a href="/pages/f9512a/" class="sidebar-link">嵌入式Linux</a></li><li><a href="/pages/9bbd13/" class="sidebar-link">在U盘安装加密的Linux系统</a></li><li><a href="/pages/9bbf2a/" class="sidebar-link">Back_Restore</a></li><li><a href="/pages/f60104/" aria-current="page" class="active sidebar-link">Gentoo安装教程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/f60104/#准备" class="sidebar-link">准备:</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#需要知道的一些东西" class="sidebar-link">需要知道的一些东西</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#ssh（not-necessary）" class="sidebar-link">ssh（not necessary）</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#连接wifi" class="sidebar-link">连接wifi</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#准备磁盘" class="sidebar-link">准备磁盘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/f60104/#uefi-gpt" class="sidebar-link">UEFI(GPT):</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#legacy-mbr" class="sidebar-link">Legacy(MBR):</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#我的分区：" class="sidebar-link">我的分区：</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#挂载" class="sidebar-link">挂载</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/f60104/#安装基本文件" class="sidebar-link">安装基本文件</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#配置make-conf和-portage-mirror" class="sidebar-link">配置make.conf和 Portage Mirror</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#进入-chroot-环境" class="sidebar-link">进入 Chroot 环境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/f60104/#复制-dns" class="sidebar-link">复制 DNS:</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#挂载必要文件系统" class="sidebar-link">挂载必要文件系统:</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#进入-chroot" class="sidebar-link">进入 Chroot:</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#add-swap分区" class="sidebar-link">ADD:SWAP分区</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/f60104/#选择-profile-并更新系统" class="sidebar-link">选择 Profile 并更新系统</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#配置时区和地区" class="sidebar-link">配置时区和地区</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#配置-fstab-安装文件系统工具" class="sidebar-link">配置 fstab, 安装文件系统工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/f60104/#dev" class="sidebar-link">/dev/</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#uuid" class="sidebar-link">UUID</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/f60104/#文件系统支持" class="sidebar-link">文件系统支持</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#network" class="sidebar-link">network</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/f60104/#config（not-necessary）" class="sidebar-link">config（not necessary）</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#安装-networkmanager" class="sidebar-link">安装 NetworkManager</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#修改主机名" class="sidebar-link">修改主机名</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/f60104/#安装一些必要工具并配置" class="sidebar-link">安装一些必要工具并配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/f60104/#system-log-management" class="sidebar-link">System Log Management</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#log-formatting-tools" class="sidebar-link">Log Formatting Tools</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#timer-planning-services" class="sidebar-link">Timer Planning Services</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#dhcp" class="sidebar-link">DHCP</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#quick-index" class="sidebar-link">Quick Index</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#start-service" class="sidebar-link">Start Service</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#set-rontab-default-editor" class="sidebar-link">Set rontab Default Editor</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#登录和密码" class="sidebar-link">登录和密码</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/f60104/#配置编译安装内核" class="sidebar-link">配置编译安装内核</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/f60104/#内核" class="sidebar-link">内核</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#简单配置" class="sidebar-link">简单配置</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#手动配置" class="sidebar-link">手动配置</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#about" class="sidebar-link">About</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/f60104/#安装-grub-并创建用户" class="sidebar-link">安装 GRUB 并创建用户</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/f60104/#for-lvm" class="sidebar-link">for LVM</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#generate-the-grub2" class="sidebar-link">generate the GRUB2</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#legacy" class="sidebar-link">Legacy:</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#some-tips" class="sidebar-link">some tips</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#管理员" class="sidebar-link">管理员</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/f60104/#显卡驱动" class="sidebar-link">显卡驱动</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#检查系统可用性" class="sidebar-link">检查系统可用性</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#安装桌面" class="sidebar-link">安装桌面</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/f60104/#kde" class="sidebar-link">KDE:</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#gnome" class="sidebar-link">GNOME:</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/f60104/#nouveau驱动问题" class="sidebar-link">nouveau驱动问题</a></li><li class="sidebar-sub-header"><a href="/pages/f60104/#继续以下安装nvidia显卡驱动" class="sidebar-link">继续以下安装nvidia显卡驱动</a></li></ul></li><li><a href="/pages/91d102/" class="sidebar-link">Linux各发行版</a></li><li><a href="/pages/ac33e1/" class="sidebar-link">LVM</a></li><li><a href="/pages/d5acfc/" class="sidebar-link">MacOS和Linux内核的区别</a></li><li><a href="/pages/7b1bc4/" class="sidebar-link">NVIDIA 问题解决</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>虚拟化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>内核初探</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux GUI</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux FAQ</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper"><div class="articleInfo-wrap" data-v-14888ed5><div class="articleInfo" data-v-14888ed5><ul class="breadcrumbs" data-v-14888ed5><li data-v-14888ed5><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-14888ed5></a></li> <li data-v-14888ed5><a href="/categories/?category=GTech%EF%BC%9ALinux%E5%9F%BA%E7%A1%80" title="分类" data-v-14888ed5>GTech：Linux基础</a></li> <li data-v-14888ed5><a href="/categories/?category=%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9D%82%E8%B0%88" title="分类" data-v-14888ed5>操作系统杂谈</a></li></ul> <div class="info" data-v-14888ed5><div title="作者" class="author iconfont icon-touxiang" data-v-14888ed5><a href="https://github.com/gocifer" target="_blank" title="作者" class="beLink" data-v-14888ed5>Gocifer</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-14888ed5><a href="javascript:;" data-v-14888ed5>2020-07-30</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">
          Gentoo安装教程
        </h1> <div class="theme-vdoing-content content__default"><h1 id="gentoo安装教程"><a href="#gentoo安装教程" class="header-anchor">#</a> Gentoo安装教程</h1> <blockquote><p>referenced from:</p> <ul><li>https://blog.yangmame.org/Gentoo%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B.html</li></ul></blockquote> <h1 id="gentoo安装教程-2"><a href="#gentoo安装教程-2" class="header-anchor">#</a> Gentoo安装教程</h1> <p>[toc]</p> <h2 id="准备"><a href="#准备" class="header-anchor">#</a> 准备:</h2> <ol><li>一个稳定的网络环境</li> <li>一个稳定的电源</li> <li>一个已能完美运行的系统.(如果你是 Linux 系统则不需要下一个)</li> <li>一个 <a href="http://cdimage.ubuntu.com/" target="_blank" rel="noopener noreferrer">Ubuntu ISO<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 镜像文件</li></ol> <p>如果你是 Windows 系统:
下载 <a href="https://rufus.akeo.ie/?locale=zh_CN" target="_blank" rel="noopener noreferrer">Rufus<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 刻录 Ubuntu 镜像
至于 UEFI Legacy GPT 和 MBR 等我就不说了, 如果不熟悉这些玩 Gentoo 恐怕困难重重</p> <p>如果你已有一个正常运行的 Linux, 恭喜, 安装 Gentoo 会简单很多.
安装完并确定可用之后之后你可以 tar 打包已安装的系统使用 live CD 解压过去并修改相关配置</p> <h2 id="需要知道的一些东西"><a href="#需要知道的一些东西" class="header-anchor">#</a> 需要知道的一些东西</h2> <p>Gentoo 有很多好用的工具，这里说下安装过程会遇到的</p> <ul><li>eselect 可以用来配置系统</li></ul> <p>比如<code>eselect python set X</code>可以设置默认的 python（<code>eselect python list</code>查看可用选项）
<code>eselect fontconfig enable X</code>可以启用 xxx 字体配置（<code>eselct fontconfig list</code>查看可用选项）</p> <ul><li>etc-update 可以用来更新 or 生成配置文件</li></ul> <p>假如系统更新了软件 有新的配置文件 Gentoo 会生成一个临时的配置文件，需要自己手动删除 合并或覆盖 可以通过运行<code>etc-update</code>进行</p> <blockquote><p>记住，要尽量保证 emerge 提示无可用更新的配置文件（特别是更新 portage 的配置文件的时候）</p></blockquote> <h2 id="ssh（not-necessary）"><a href="#ssh（not-necessary）" class="header-anchor">#</a> ssh（not necessary）</h2> <p>Into System Boot Interface by press Enter:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>gentoo dopcmcia
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="http://note.youdao.com/yws/res/8455/WEBRESOURCEdcd080650da5812efa08a2270e426fae" alt="image.png"></p> <p>Into Livecd Temporary Boot</p> <p>In this system, we can simple configure the system that we wanna installed, such as a simple network configuration connection, the system partition, compile the kernel driver, system boot production, etc.</p> <p><img src="http://note.youdao.com/yws/res/8457/WEBRESOURCE160d4d69acca87abb46244bcdcf49e15" alt="image.png"></p> <p>Configure Root Account</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>livecd ~ # passwd root
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Open SSH Service</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/etc/init.d/sshd start
OR:
service sshd start 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Check Network Configure</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>livecd ~ # ifconfig
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Because I install Gentoo in VMware virtual machine, so the network interface names is different with common interfaces eth0</p> <p>SSH Login Shell</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Last login: Fri Apr 25 18:07:24 on ttys000
xuris-MacBook-Pro:~ xuri$ ssh -l root 172.16.184.146
Password:
Welcome to the Gentoo Linux Minimal Installation CD!

The root password on this system has been auto-scrambled for security.

If any ethernet adapters were detected at boot, they should be auto-configured
if DHCP is available on your network.  Type &quot;net-setup eth0&quot; to specify eth0 IP
address settings by hand.

Check /etc/kernels/kernel-config-* for kernel configuration(s).
The latest version of the Handbook is always available from the Gentoo web
site by typing &quot;links http://www.gentoo.org/doc/en/handbook/handbook.xml&quot;.

To start an ssh server on this system, type &quot;/etc/init.d/sshd start&quot;.  If you
need to log in remotely as root, type &quot;passwd root&quot; to reset root's password
to a known value.

Please report any bugs you find to http://bugs.gentoo.org. Be sure to include
detailed information about how to reproduce the bug you are reporting.
Thank you for using Gentoo Linux!

livecd ~ #
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="连接wifi"><a href="#连接wifi" class="header-anchor">#</a> 连接wifi</h2> <p>使用命令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ifconfig
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>很明显最后一个是无线设备</p> <p>不同电脑的有线无线设备名称都不同，大部分是&quot;eth0&quot;和&quot;wlan0&quot;</p> <p>使用命令：(中间的无线设备名称是刚刚ifconfig获得的，不同电脑不一样，请注意，你的可能不是wlp12s0)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ifconfig wlp12s0 up         #启动设备
iwconfig wlp12s0 power on       #启动电源管理（可选）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>扫描WIFI，使用命令：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>iwlist scan
扫描到的wifi
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>可以看到扫出来一大堆东西，每一个wifi都以call num开头，call 01是我要连接的wifi</p> <p>下面有一些重要的信息，essid就是wifi的名，IE那一行显示了wifi的加密方式
我路由器使用的是wpa（当前大部分的路由器都是这个加密，安全！），需使用“wpa_supplicant”命令连接：</p> <p>在这之前配置一下wpa_supplicant，linux配置文件都在/etc中，
wpa_supplicant在“/etc/wpa_supplicant/”
需要在这个目录下添加“wpa_supplicant.conf”
编辑：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    network={
        ssid=&quot;Xiaomi_devil&quot;
        psk=&quot;&quot;
        priority=1
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>分别是：wifi名，密码，最后一个默认1
保存退出，进行连接：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>wpa_supplicant -i wlp12s0 -c /etc/wpa_supplicant/wpa_supplicant.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>传统的wpe连接起来更简单，直接连接：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@FriendlyARM /]# iwconfig wlan0 essid &quot;FRIENDLY-ARM&quot;
[root@FriendlyARM /]# iwconfig wlan0 key s:12345
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>检测了一下网络连接情况，没问题</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ping baidu.com
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="准备磁盘"><a href="#准备磁盘" class="header-anchor">#</a> 准备磁盘</h2> <p>启动到 live CD(已有 Linux 系统忽略这句)
使用你喜欢的工具进行分区 (或者直接用 gparted)
这里会声明下分区, 之后的过程将使用这些变量</p> <h3 id="uefi-gpt"><a href="#uefi-gpt" class="header-anchor">#</a> UEFI(GPT):</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sda1 ---/boot---&gt;vfat                   &gt;=200M     #注意分区设置flags为esp
sda2 ---/---&gt;ext4,btrfs,xfs,jfs.etc     &gt;=20G      #建议至少20G大小
sda3 ---swap---&gt;                        &gt;=2G       #除非你16G内存,即使你8G内存也建议设置2G的swap

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="legacy-mbr"><a href="#legacy-mbr" class="header-anchor">#</a> Legacy(MBR):</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sda1 ---/boot---&gt;ext2                   &gt;=200M     #可以不设置此分区
sda2 ---/---&gt;ext4,btrfs,xfs,jfs.etc     &gt;=20G      #建议至少20G大小
sda3 ---swap---&gt;                        &gt;=2G       #除非你16G内存,即使你8G内存也建议设置2G的swap

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="我的分区："><a href="#我的分区：" class="header-anchor">#</a> 我的分区：</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>sdb1 ---/boot/efi---&gt;vfat               =1024M      #因为我把所有的启动引导都放这了
sda8 ---swwap---&gt;                       &gt;8G         #这是我所有linux共有的
Gentoo-boot ---/boot---&gt;ext4            &gt;768G       #LVM
Gentoo-main ---/---&gt;ext4                =26G        #LVM
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="挂载"><a href="#挂载" class="header-anchor">#</a> 挂载</h3> <p>创建目录:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir -v /mnt/gentoo

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>挂载目录:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mount -v /dev/sda2 /mnt/gentoo

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="安装基本文件"><a href="#安装基本文件" class="header-anchor">#</a> 安装基本文件</h2> <p>在这里你需要选择一个镜像站, 在这里列出几个速度比较快的镜像站, 请亲自测试选择镜像站:</p> <p><a href="https://mirrors.ustc.edu.cn/" target="_blank" rel="noopener noreferrer">USTC<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener noreferrer">TUNA<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> <a href="http://mirrors.163.com/" target="_blank" rel="noopener noreferrer">163<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>进入镜像站的<code>/gentoo/releases/amd64/autobuilds/</code>目录</p> <p>如果你对 systemd 没有刚需则进入<code>current-stage3-amd64/</code>目录选择最新的<code>stage3</code>下载到本地的<code>/mnt/gentoo</code>目录, 例如: stage3-amd64-20171019.tar.bz2</p> <p>如果你需要 systemd, 则进入<code>current-stage3-amd64-systemd/</code>目录选择最新的<code>stage3</code>下载到本地的<code>/mnt/gentoo</code>目录, 例如: stage3-amd64-systemd-20171018.tar.bz2</p> <p>下载完成之后进入 gentoo 的根目录并解压文件:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd /mnt/gentoo
tar vxpf stage3-*.tar.bz2或xz --xattrs-include='*.*' --numeric-owner

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="配置make-conf和-portage-mirror"><a href="#配置make-conf和-portage-mirror" class="header-anchor">#</a> 配置<code>make.conf</code>和 Portage Mirror</h2> <p>以下参数在经过自己调整或选择之后加入到 <code>/mnt/gentoo/etc/portage/make.conf</code></p> <ul><li>USE: 首先, 你可以删掉默认的 USE 标记，加上<code>-bindist</code> (不了解 USE 的情况下建议如此)</li> <li>CFLAGS: 将 CFLAGS 修改为<code>CFLAGS=&quot;-march=native -O2 -pipe&quot;</code> 或者你也可以指定. 例如我的 Intel CPU 是 haswell, 将 native 换成 haswell 就行 (不确定就不要指定). 你也可以在<a href="https://www.funtoo.org/Subarches" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>看到所有可以设置的值</li> <li>MAKEOPTS: 根据你的 CPU 核心数设置 MAKEOPTS 例如双四线程设置为<code>MAKEOPTS=&quot;-j5&quot;</code></li> <li>GENTOO_MIRRORS: 设置为<code>GENTOO_MIRRORS=&quot;https://mirrors.ustc.edu.cn/gentoo/&quot;</code> 请自行选择速度最快的 Mirror</li> <li>EMERGE_DEFAULT_OPTS: 设置为<code>EMERGE_DEFAULT_OPTS=&quot;--keep-going --with-bdeps=y&quot;</code>是个不错的选择, keep going 意为安装一堆软件时遇到编译错误自动跳过这个软件继续编译安装</li> <li>FEATURES: 在这里最好写成<code># FEATURES=&quot;${FEATURES} -userpriv -usersandbox -sandbox&quot;</code>, 最好在前面加上 #注释掉, 在你编译软件遇到权限不足时去掉注释即可解决问题（但请务必注意是不是因为<code>rm -rf /*</code>等命令权限不足，因为说不定你的 ebuild 文件被篡改了）</li> <li>ACCEPT_KEYWORDS: 如果你想用作桌面 / 学习 / 开发系统那就务必加上<code>ACCEPT_KEYWORDS=&quot;~amd64&quot;</code>，服务器 / 工作 / 家 / 娱乐用可以忽略</li> <li>ACCEPT_LICENSE: 加上<code>ACCEPT_LICENSE=&quot;*&quot;</code>表示此系统接受所有软件许可证, 即不论非自由还是自由软件都接受, 非商业用户基本不需要考虑</li> <li>L10N: 设置为<code>L10N=&quot;en-US zh-CN en zh&quot;</code></li> <li>LINGUAS: 设置为<code>LINGUAS=&quot;en_US zh_CN en zh&quot;</code></li> <li>VIDEO_CARDS: 根据你的显卡类型设置假如你是 NVIDIA 单显卡则设置为<code>VIDEO_CARDS=&quot;nvidia&quot;</code>(闭源驱动)<code>VIDEO_CARDS=&quot;nouveau&quot;</code>(开源驱动). 还有 radeon 和 intel, 但如果你是双显卡例如 Intel+NVIDIA 则设置为<code>VIDEO_CARDS=&quot;intel i965 nvidia&quot;</code>(只要不是远古的集成显卡都是用 i965)</li> <li>GRUB_PLATFORMS: 如果你使用 GRUB 且使用 UEFI 启动则添加<code>GRUB_PLATFORMS=&quot;efi-64&quot;</code></li> <li>Portage Mirror: 这个不是 make.conf 的选项.创建 repos.conf 目录并添加如下到 / mnt/gentoo/etc/portage/repos.conf/gentoo.conf 文件里面 (自行选择速度最快的镜像站):</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkdir /mnt/gentoo/etc/portage/repos.conf 
cp /mnt/gentoo/usr/share/portage/config/repos.conf /mnt/gentoo/etc/portage/repos.conf/gentoo.conf 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>[gentoo]
location = /usr/portage
sync-type = rsync
#sync-uri = rsync://mirrors.tuna.tsinghua.edu.cn/gentoo-portage/
sync-uri = rsync://rsync.mirrors.ustc.edu.cn/gentoo-portage/
auto-sync = yes

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>示例配置（请以实际为标准）：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mirrorselect -i -o &gt;&gt; /mnt/gentoo/etc/portage/make.conf 
OR：
cp /usr/share/portage/config/make.conf.example /usr/share/portage/config/make.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code># /usr/share/portage/config/make.conf.example

# GCC
**CFLAGS=&quot;-march=haswell -O2 -pipe&quot;
CXXFLAGS=&quot;${CFLAGS}&quot;
CHOST=&quot;x86_64-pc-linux-gnu&quot;
CPU_FLAGS_X86=&quot;aes avx avx2 fma3 mmx mmxext pclmul popcnt sse sse2 sse3 sse4_1 sse4_2 ssse3&quot;
**MAKEOPTS=&quot;-j5&quot;

# USE
SUPPORT=&quot;pulseaudio btrfs mtp git chromium&quot;
DESKTOP=&quot;infinality emoji cjk&quot;
FUCK=&quot;-bindist -grub -plymouth -systemd consolekit -modemmanager -gnome-shell -gnome -gnome-keyring -nautilus -modules&quot;
ELSE=&quot;client icu sudo python&quot;

USE=&quot;${SUPPORT} ${DESKTOP} ${FUCK} ${ELSE}&quot;

# Portage
PORTDIR=&quot;/usr/portage&quot;
DISTDIR=&quot;${PORTDIR}/distfiles&quot;
PKGDIR=&quot;${PORTDIR}/packages&quot;
# GENTOO_MIRRORS=&quot;https://mirrors.tuna.tsinghua.edu.cn/gentoo/&quot;
GENTOO_MIRRORS=&quot;https://mirrors.ustc.edu.cn/gentoo/&quot;
EMERGE_DEFAULT_OPTS=&quot;--ask --verbose=y --keep-going --with-bdeps=y --load-average&quot;
# FEATURES=&quot;${FEATURES} -userpriv -usersandbox -sandbox&quot;
PORTAGE_REPO_DUPLICATE_WARN=&quot;0&quot;
# PORTAGE_TMPDIR=&quot;/var/tmp/notmpfs&quot;

ACCEPT_KEYWORDS=&quot;~amd64&quot;
ACCEPT_LICENSE=&quot;*&quot;

# Language
L10N=&quot;en-US zh-CN en zh&quot;
LINGUAS=&quot;en_US zh_CN en zh&quot;

# Else
**VIDEO_CARDS=&quot;intel i965 nvidia&quot;

**RUBY_TARGETS=&quot;ruby24 ruby25&quot;

**LLVM_TARGETS=&quot;X86&quot;

**QEMU_SOFTMMU_TARGETS=&quot;alpha aarch64 arm i386 mips mips64 mips64el mipsel ppc ppc64 s390x sh4 sh4eb sparc sparc64 x86_64&quot;
**QEMU_USER_TARGETS=&quot;alpha aarch64 arm armeb i386 mips mipsel ppc ppc64 ppc64abi32 s390x sh4 sh4eb sparc sparc32plus sparc64&quot;
# ABI_X86=&quot;64 32&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h2 id="进入-chroot-环境"><a href="#进入-chroot-环境" class="header-anchor">#</a> 进入 Chroot 环境</h2> <h3 id="复制-dns"><a href="#复制-dns" class="header-anchor">#</a> 复制 DNS:</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>cp --dereference /etc/resolv.conf /mnt/gentoo/etc/

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="挂载必要文件系统"><a href="#挂载必要文件系统" class="header-anchor">#</a> 挂载必要文件系统:</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>mount -t proc /proc /mnt/gentoo/proc
mount --rbind /sys /mnt/gentoo/sys
mount --make-rslave /mnt/gentoo/sys
mount --rbind /dev /mnt/gentoo/dev
mount --make-rslave /mnt/gentoo/dev

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果你有 boot 分区则在这里挂载上去:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mount /dev/sda1 /mnt/gentoo/boot
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Debian 等发行版可能需要：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>test -L /dev/shm &amp;&amp; rm /dev/shm &amp;&amp; mkdir /dev/shm
mount --types tmpfs --options nosuid,nodev,noexec shm /dev/shm
chmod 1777 /dev/shm

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="进入-chroot"><a href="#进入-chroot" class="header-anchor">#</a> 进入 Chroot:</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>chroot /mnt/gentoo /bin/bash
source /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="add-swap分区"><a href="#add-swap分区" class="header-anchor">#</a> ADD:SWAP分区</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>mkswap /dev/sda2
swapon /dev/sda2
swapon -s
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="选择-profile-并更新系统"><a href="#选择-profile-并更新系统" class="header-anchor">#</a> 选择 Profile 并更新系统</h2> <p>使用快照更新 Portage:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge-webrsync

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>使用 rsync 同步:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge --sync

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这里还有个 CPU_FLAGS_X86, 在<code>emerge --sync</code>之后安装<code>app-portage/cpuid2cpuflags</code>并配置:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge --ask app-portage/cpuid2cpuflags
cpuid2cpuflags #将输出值改入CPU_FLAGS_X86

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用<code>eselect news read</code>命令阅读新闻</p> <p>列出 profile:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>eselect profile list

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果你使用 systemd 则需要选上带有 systemd 字样的选项</p> <p>如果你不使用 systemd 则不建议使用 GNOME 桌面, 因为 GNOME 桌面依赖 systemd(辣鸡)</p> <p>例如不使用 systemd 且使用 KDE 桌面则选择 19 default/linux/amd64/17.0/desktop/plasma:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>eselect profile set 19
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后就是漫长的更新了 (有钱人当我没说):</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -auvDN --with-bdeps=y @world

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果碰到未满足的 xxx 或者其它提示:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -auvDN --with-bdeps=y --autounmask-write @world
etc-update # 然后输入-3就能更新配置,确保再次运行时没有可更新的文件
emerge -auvDN --with-bdeps=y @world

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>如果以上还是不能解决问题, 则进入 / etc/portage 目录删掉 package.use,package.mask 和 package.unmask 文件或目录再次尝试_**</p></blockquote> <p>到了这里, 你可以去看电影了...</p> <p>等它跑完了, 先别急
运行下这几个命令:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge @preserved-rebuild
perl-cleaner --all
emerge -auvDN --with-bdeps=y @world

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>确定没有更新之后再继续，否则查看输出尝试重复运行</p> <p>如果你在<code>emerge -auvDN --with-bdeps=y @world</code>时提示带有<code>bindsit</code>字样且你已启用<code>ACCEPT_KEYWORDS=&quot;~amd64&quot;</code>的话
运行如下命令之后再次重试：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd /usr/portage/dev-libs/openssl/
ebuild openssl-1.0.2o-r6.ebuild merge # 这里openssl的版本可能和你的不一样，运行ls命令查看可用版本，替换为版本号带o字母的即可
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="配置时区和地区"><a href="#配置时区和地区" class="header-anchor">#</a> 配置时区和地区</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>echo &quot;Asia/Shanghai&quot; &gt; /etc/timezone
emerge --config sys-libs/timezone-data

echo &quot;en_US.UTF-8 UTF-8
zh_CN.UTF-8 UTF-8&quot; &gt;&gt; /etc/locale.gen

locale-gen

eselect locale list

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这里建议使用英语易于排错, 之后你可以自行换成中文:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>eselect locale set X # X换成上面命令显示的序号

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="配置-fstab-安装文件系统工具"><a href="#配置-fstab-安装文件系统工具" class="header-anchor">#</a> 配置 fstab, 安装文件系统工具</h2> <p>如果你和我一样懒</p> <p>可以下载此脚本自动配置 fstab(引自 Arch 的 genfstab):</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>wget https://raw.githubusercontent.com/YangMame/Gentoo-Installer/master/genfstab
chmod +x genfstab
#可选 cp genfstab /usr/bin/
./genfstab / &gt; /etc/fstab
nano /etc/fstab #最好检查下此文件,删掉无用挂载点

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>上面的脚本在 chroot 环境下不能正常使用 - U 参数在 fstab 写入分区的 UUID</p> <p>挂载点主要有俩种格式:</p> <h3 id="dev"><a href="#dev" class="header-anchor">#</a> /dev/</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>/dev/sda1    /boot    vfat或ext2    defaults    0 0
/dev/sda2    /    ext4或btrfs,jfs,xfs.etc    defaults    0 0
/dev/sda3    none    swap    defaults    0 0

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="uuid"><a href="#uuid" class="header-anchor">#</a> UUID</h3> <p>这里的 UUID 通过 blkid 查看</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>UUID=xxxxxxxxxxx   /boot    vfat或ext2    defaults    0 0
UUID=xxxxxxxxxxx    /    ext4或btrfs,jfs,xfs.etc    defaults    0 0
UUID=xxxxxxxxxxx    none    swap    defaults    0 0

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="文件系统支持"><a href="#文件系统支持" class="header-anchor">#</a> 文件系统支持</h2> <p>如果你使用非 ext4 文件系统则在编译内核前需要另外安装相应的工具:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>btrfs: emerge sys-fs/btrfs-progs
xfs: emerge sys-fs/xfsprogs
jfs: emerge sys-fs/jfsutils
lvm: emerge --ask sys-fs/lvm2

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="network"><a href="#network" class="header-anchor">#</a> network</h2> <h3 id="config（not-necessary）"><a href="#config（not-necessary）" class="header-anchor">#</a> config（not necessary）</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim /etc/conf.d/net 
dns_domain_lo=&quot;test.local&quot; 


emerge --ask --noreplace net-misc/netifrc 


vim /etc/conf.d/net 
config_eno16777728=&quot;dhcp&quot; 


cd /etc/init.d 
ln -s net.lo net.eno16777728 


rc-update add net.eno16777728 default 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="安装-networkmanager"><a href="#安装-networkmanager" class="header-anchor">#</a> 安装 NetworkManager</h3> <p>没错, 我很懒, 又加上我是 KDE 桌面用户, 所以我选择使用 NetworkManager 连接网络:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -av networkmanager
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果它说有未满足的 xxxx 或者其它提示:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge --autounmask-write networkmanager
etc-update --automode -3
emerge networkmanager

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>openRC(即非 systemd) 添加开机服务:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rc-update add NetworkManager default

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>systemd 添加开机服务:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl enable NetworkManager

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="修改主机名"><a href="#修改主机名" class="header-anchor">#</a> 修改主机名</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>echo hostname=\&quot;Test\&quot; &gt; /etc/conf.d/hostname
OR:
vim /etc/conf.d/hostname 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="安装一些必要工具并配置"><a href="#安装一些必要工具并配置" class="header-anchor">#</a> 安装一些必要工具并配置</h2> <h3 id="system-log-management"><a href="#system-log-management" class="header-anchor">#</a> System Log Management</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>(chroot) livecd src # emerge syslog-ng
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="log-formatting-tools"><a href="#log-formatting-tools" class="header-anchor">#</a> Log Formatting Tools</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>(chroot) livecd src # emerge logrotate
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="timer-planning-services"><a href="#timer-planning-services" class="header-anchor">#</a> Timer Planning Services</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>(chroot) livecd src # emerge vixie-cron
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="dhcp"><a href="#dhcp" class="header-anchor">#</a> DHCP</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>(chroot) livecd src # emerge dhcpcd
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="quick-index"><a href="#quick-index" class="header-anchor">#</a> Quick Index</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>(chroot) livecd src # emerge mlocate
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="start-service"><a href="#start-service" class="header-anchor">#</a> Start Service</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>(chroot) livecd src # rc-update add syslog-ng default
 * service syslog-ng added to runlevel default
(chroot) livecd src # rc-update add vixie-cron default
 * service vixie-cron added to runlevel default
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="set-rontab-default-editor"><a href="#set-rontab-default-editor" class="header-anchor">#</a> Set rontab Default Editor</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge vim
(chroot) livecd src # echo &quot;export EDITOR='/usr/bin/vim'&quot; &gt;&gt; /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="登录和密码"><a href="#登录和密码" class="header-anchor">#</a> 登录和密码</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge app-admin/sysklogd sys-process/cronie sudo layman 
sed -i 's/\# \%wheel ALL=(ALL) ALL/\%wheel ALL=(ALL) ALL/g' /etc/sudoers
passwd #是时候设置root密码了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果你是 systemd:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sed -i 's/\# GRUB_CMDLINE_LINUX=\&quot;init=\/usr\/lib\/systemd\/systemd\&quot;/GRUB_CMDLINE_LINUX=\&quot;init=\/usr\/lib\/systemd\/systemd\&quot;/g' /etc/default/grub
ln -sf /proc/self/mounts /etc/mtab
systemd-machine-id-setup

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>非 systemd 系统:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rc-update add sysklogd default
rc-update add cronie default
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="配置编译安装内核"><a href="#配置编译安装内核" class="header-anchor">#</a> 配置编译安装内核</h2> <h3 id="内核"><a href="#内核" class="header-anchor">#</a> 内核</h3> <p>有以下推荐内核可供选择:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>gentoo-sources
ck-sources
git-sources

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这里示例使用 gentoo-sources:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -av gentoo-sources

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="简单配置"><a href="#简单配置" class="header-anchor">#</a> 简单配置</h3> <p>如果你不会配置内核或者时间不允许可以先用<code>genkernel</code>:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -av genkernel
genkernel --menuconfig all
genkernel --install initramfs

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="手动配置"><a href="#手动配置" class="header-anchor">#</a> 手动配置</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd /usr/src/linux
make menuconfig

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>配置完之后:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>make -jX #将X替换为你想编译时的线程数
make modules_install
make install
genkernel --install initramfs

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="about"><a href="#about" class="header-anchor">#</a> About</h3> <h4 id="lvm"><a href="#lvm" class="header-anchor">#</a> LVM</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>genkernel --lvm --install initramfs 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="报错"><a href="#报错" class="header-anchor">#</a> 报错</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>* WARNING... WARNING... WARNING...
* Additional kernel cmdline arguments that *may* be required to boot properly...
* With support for several ext* filesystems available, it may be needed to
* add &quot;rootfstype=ext3&quot; or &quot;rootfstype=ext4&quot; to the list of boot parameters.

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>The error regarding mounting /boot was due to the fact that I am running in a chroot; the installation of the kernel was not affected.</p></blockquote> <h4 id="kernel-makefile-usr-src-linux-makefile-missing"><a href="#kernel-makefile-usr-src-linux-makefile-missing" class="header-anchor">#</a> Kernel Makefile (/usr/src/linux/Makefile) missing</h4> <p>Make sure to install kernel sources:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>root # emerge --ask sys-kernel/gentoo-sources
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>If the sources are already installed, make sure you have selected a valid kernel:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>root # eselect kernel list
Available kernel symlink targets:
  [1]   linux-4.4.6-gentoo
  [2]   linux-4.4.21-gentoo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>The absence of a star above indicates that no kernel is currently selected.
Do so now:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>root #  eselect kernel set 2
root # eselect kernel list
Available kernel symlink targets:
  [1]   linux-4.4.6-gentoo
  [2]   linux-4.4.21-gentoo *
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="安装-grub-并创建用户"><a href="#安装-grub-并创建用户" class="header-anchor">#</a> 安装 GRUB 并创建用户</h2> <h3 id="for-lvm"><a href="#for-lvm" class="header-anchor">#</a> for LVM</h3> <p>Summary</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>vim /etc/portage/package.use/package.use 

sys-boot/grub:2 device-mapper 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>emerge --ask --verbose sys-boot/grub:2 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>vim /etc/default/grub 

GRUB_CMDLINE_LINUX_DEFAULT=&quot;dolvm&quot; 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>再建立生成引导：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>grub-install 。。。。。。 

grub-mkconfig -o /boot/grub/grub.cfg 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="emerge"><a href="#emerge" class="header-anchor">#</a> emerge</h4> <p>GRUB needs to be compiled with <em>device-mapper</em>, execute the following command first:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>echo 'sys-boot/grub:2 device-mapper' &gt;&gt; /etc/portage/package.use/package.use
emerge --ask --verbose sys-boot/grub:2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="configure"><a href="#configure" class="header-anchor">#</a> Configure</h4> <p>The <code>dolvm</code> option needs to be enabled for <code>GRUB_CMDLINE_LINUX_DEFAULT</code> in the /etc/default/grub file, edit it:</p> <p><code>vim /etc/default/grub</code></p> <p>Configure the option:</p> <p>FILE <strong><code>/etc/default/grub</code></strong> <strong>GRUB_CMDLINE_LINUX_DEFAULT option</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;dolvm&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="generate-the-grub2"><a href="#generate-the-grub2" class="header-anchor">#</a> generate the GRUB2</h3> <h4 id="uefi"><a href="#uefi" class="header-anchor">#</a> UEFI:</h4> <div class="language- line-numbers-mode"><pre class="language-text"><code>grub-install --target=x86_64-efi --efi-directory=/boot/efi --bootloader-id=Gentoo
grub-mkconfig -o /boot/grub/grub.cfg

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如果出现<code>No space left on device</code></p> <p>请运行：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>mount -t efivarfs efivarfs /sys/firmware/efi/efivars
rm /sys/firmware/efi/efivars/dump-*
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后重试（由 @Chara 提议加上）</p> <h3 id="legacy"><a href="#legacy" class="header-anchor">#</a> Legacy:</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>grub-install --target=i386-pc /dev/sda
grub-mkconfig -o /boot/grub/grub.cfg

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="some-tips"><a href="#some-tips" class="header-anchor">#</a> some tips</h3> <p><img src="http://note.youdao.com/yws/res/8354/WEBRESOURCE79d43e8a9e3e6ee9f40e3a0cf58aaf4b" alt="image.png"></p> <h3 id="管理员"><a href="#管理员" class="header-anchor">#</a> 管理员</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>useradd -m -G users,wheel,portage,usb,video 这里换成你的用户名(小写)
passwd 用户名

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="显卡驱动"><a href="#显卡驱动" class="header-anchor">#</a> 显卡驱动</h2> <p>NVIDIA 单显卡:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -av x11-drivers/nvidia-drivers

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Intel 单显卡:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -av x11-drivers/xf86-video-intel

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Intel+NVIDIA 双显卡请看这篇<a href="https://blog.yangmame.top/Gentoo%E5%8F%8C%E6%98%BE%E5%8D%A1%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE.html" target="_blank" rel="noopener noreferrer">文章<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>其它显卡硬件待补坑 欢迎提出</p> <h2 id="检查系统可用性"><a href="#检查系统可用性" class="header-anchor">#</a> 检查系统可用性</h2> <p>到了这里你应该可以重启查看系统是否能正常启动, 然后在安装桌面</p> <p>重启前最好检查下的东西:</p> <ol><li>boot 目录是否有相应文件</li> <li>GRUB 是否正确生成配置并显示内核等文件</li> <li>fstab 是否正确无误</li></ol> <h2 id="安装桌面"><a href="#安装桌面" class="header-anchor">#</a> 安装桌面</h2> <p>首先需要确保已安装 xorg-server 和显卡驱动:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -av xorg-server
emerge xf86-video-intel #Intel显卡驱动
emerge nvidia-drivers #nvidia显卡驱动

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如遇需要更新配置则运行<code>etc-update --automode -3</code>并再次运行命令</p> <h3 id="kde"><a href="#kde" class="header-anchor">#</a> KDE:</h3> <blockquote><p>emerge chromium kde-plasma/plasma-meta</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -av plasma-desktop kde-plasma/kdeplasma-addons plasma-nm plasma-pa sddm konsole

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>kde-plasma/powerdevil (power management, suspend and hibernate options)</li> <li>kde-plasma/systemsettings</li></ul> <p>By default the classic tree view of kde-plasma/systemsettings is not enabled. The following USE flag will enable it:</p> <ul><li>FILE <code>/etc/portage/package.use/systemsettings</code>  Enable classic tree view</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>kde-plasma/systemsettings classic
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Recompile systemsettings with new USE flags:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>root #emerge --ask --changed-use kde-plasma/systemsettings
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如遇需要更新配置则运行<code>etc-update --automode -3</code>并再次运行命令</p> <p>如果你是 systemd:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>systemctl enable sddm

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>openrc 则编辑<code>/etc/conf.d/xdm</code>将<code>DISPLAYMANAGER</code>的值改为<code>sddm</code>并:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>rc-update add xdm default

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="gnome"><a href="#gnome" class="header-anchor">#</a> GNOME:</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -av gnome-shell gdm gnome-terminal
systemctl enable gdm

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>如遇需要更新配置则运行<code>etc-update --automode -3</code>并再次运行命令</p> <p><strong><em>这里只说明 systemd, 因为 openrc 并不能满足 GNOME 的依赖</em></strong></p> <h2 id="nouveau驱动问题"><a href="#nouveau驱动问题" class="header-anchor">#</a> nouveau驱动问题</h2> <blockquote><p>如果因为nouveau驱动启动不了桌面环境，可以屏蔽掉</p></blockquote> <div class="language- line-numbers-mode"><pre class="language-text"><code>echo &quot;blacklist nouveau&quot; &gt;&gt; /etc/modprobe.d/blacklist.conf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>如果仍然有问题，可以修改一下显卡相关的配置文件</p></blockquote> <ul><li>通过 lspci -k 查看内核配置检查(确保以下grep显示y）：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>cd /usr/src/linux
cat .config | grep CONFIG_MODULES=
cat .config | grep CONFIG_MODULE_UNLOAD=
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>编辑/etc/portage/make.conf添加如下：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>VIDEO_CARDS=”intel i965 nvidia”
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>更新：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge –-sync &amp;&amp; emerge -avuDN @world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>到这里可以重新安装一下内核</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>据实践，步骤进行到这里就可以正常启动桌面环境了</p></blockquote> <h2 id="继续以下安装nvidia显卡驱动"><a href="#继续以下安装nvidia显卡驱动" class="header-anchor">#</a> 继续以下安装nvidia显卡驱动</h2> <ul><li>添加如下内容到/etc/portage/package.accept_keywords：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>=sys-power/bbswitch-9999 **
=x11-misc/bumblebee-9999 **
=x11-misc/primus-0.2 ~amd64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>安装：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>emerge -av bbswitch primus bumblebee
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>用户组：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>gpasswd -a 你的用户名 video &amp;&amp; gpasswd -a 你的用户名 bumblebee
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>编辑/etc/init.d/bumblebee 删除以下内容：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>depend() {
need xdm
need vgl
after sshd
} # 可能稍有不同 但放心的删掉depend(){…}就行了 因为根本不需要
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>编辑/etc/bumblebee/bumblebee.conf 修改为以下参数：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>KeepUnusedXServer=false
Driver=nvidia
Bridge=primus
VGLTransport=rgb (如果你使用vgl则修改此参数)
KernelDriver=nvidia
PMMethod=bbswitch
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>开机服务：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>rc-update add bumblebee default
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>测试：</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>optirun neofetch # neofetch可替换
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>PS：如果你还没有桌面则使用primusrun</li></ul></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/gocifer/GLog/edit/master/docs/GTech：Linux基础/04.操作系统杂谈/06.Gentoo安装教程.md" target="_blank" rel="noopener noreferrer">编辑</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020/07/31, 11:07:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/9bbf2a/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">
        Back_Restore
      </div></a> <a href="/pages/91d102/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">
        Linux各发行版
      </div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/9bbf2a/" class="prev">Back_Restore</a></span> <span class="next"><a href="/pages/91d102/">Linux各发行版</a>
        →
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/GTech%EF%BC%9ALinux%E5%9F%BA%E7%A1%80/04.%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9D%82%E8%B0%88/07.Linux-4.4-x86_64%20%E5%86%85%E6%A0%B8%E9%85%8D%E7%BD%AE/"><div></div></a> <span></span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/9b58a3/"><div>index</div></a> <span>07-30</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/98238b/"><div>基本命令</div></a> <span>07-30</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="icons"><a href="mailto:blinderjay@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/gocifer" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
     | Copyright © 2020-2020
    <span>gocifer | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/assets/js/app.5bb0b44e.js" defer></script><script src="/assets/js/2.717babc4.js" defer></script><script src="/assets/js/45.0adf5159.js" defer></script>
  </body>
</html>