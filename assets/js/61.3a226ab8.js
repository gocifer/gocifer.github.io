(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{475:function(e,s,a){"use strict";a.r(s);var t=a(6),r=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"emerge包管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#emerge包管理"}},[e._v("#")]),e._v(" emerge包管理")]),e._v(" "),a("h2",{attrs:{id:"emerge"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#emerge"}},[e._v("#")]),e._v(" emerge")]),e._v(" "),a("p",[e._v("[toc]")]),e._v(" "),a("p",[e._v("在 / usr/portage 中我们看到所有 emerge 可用与管理的包，cd 进去还能看到里面的包")]),e._v(" "),a("p",[e._v("使用 emerge 安装软件的时候：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge app-editors/vim\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("emerge 后面紧跟的第一层也就是这个目录中第一层可用包，第二层对应了包下一层软件包")]),e._v(" "),a("h2",{attrs:{id:"use"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use"}},[e._v("#")]),e._v(" USE")]),e._v(" "),a("p",[e._v("一个软件不止是程序，还有文档，插件扩展，UI 支持等等，而 use 就是可以添加删除这些额外福利的变量。")]),e._v(" "),a("p",[e._v("两种方式使用 USE：")]),e._v(" "),a("ul",[a("li",[e._v("可以直接修改 make.conf 里的 USE 变量。")]),e._v(" "),a("li",[e._v("emerge 命令前使用，相当于临时变量（推荐）")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('USE="cscope lua ruby python perl" emerge --ask app-editors/vim\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("h3",{attrs:{id:"make-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#make-conf"}},[e._v("#")]),e._v(" make.conf")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("cd /etc/portage\n\ncat ./make.conf\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br")])]),a("p",[e._v("此文件记录了编译时用到的参数，CFLAGS，CXXFLAGS，MAKEOPTS 等参数，一般不需要修改。\n但有一个 USE 的变量很常用")]),e._v(" "),a("h2",{attrs:{id:"emerge常用命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#emerge常用命令"}},[e._v("#")]),e._v(" emerge常用命令")]),e._v(" "),a("p",[a("strong",[e._v("卸载软件")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge -C vim\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("strong",[e._v("移除不影响系统功能的软件（清理系统）")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge --clean\nemerge -c\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[a("strong",[e._v("卸载可以移除的依赖 (深度清理)")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge --depclean\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("strong",[e._v("安装特定版本的软件")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('emerge "=python-3.2"\nemerge "<python-3.2"\n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[a("strong",[e._v("升级软件")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge -u opera\nemerge --update opera\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[a("strong",[e._v("升级系统软件")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge -u system\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("strong",[e._v("升级整个系统")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge -u world\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("world 来自 /var/lib/portage/world")]),e._v(" "),a("p",[a("strong",[e._v("避免升级覆盖掉版本更高的软件")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge -uU world\nemerge --update --upgradeonly world\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("p",[e._v("安装了 masked 软件包，升级时可能会降级处理的")]),e._v(" "),a("p",[a("strong",[e._v("查看某软件包可用的 USE 参数")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge -pv php\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("这个就非常有用了")]),e._v(" "),a("p",[a("strong",[e._v("临时设置 USE 并以临时的 USE 变量 emerge 软件包")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('USE="-minimal" emerge -1 xinit \n')])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("注意：添加不需要 “+” 号")]),e._v(" "),a("p",[e._v("如果想以某种规则（USE）永久性的安装某软件包，那么在 /etc/portage/package.use 文件里添加如下一行内容：")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("echo x11-apps/xinit -minimal >> /etc/portage/package.use\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("添加后，就会 以 USE=”-minimal” 安装 xinit 了， 而且是永久性的（除非删掉此行）\n不存在 /etc/portage/ 目录的话，手动创建")]),e._v(" "),a("h2",{attrs:{id:"选项解释"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#选项解释"}},[e._v("#")]),e._v(" 选项解释")]),e._v(" "),a("ul",[a("li",[e._v("交互询问")])]),e._v(" "),a("p",[e._v("--ask (-a)")]),e._v(" "),a("ul",[a("li",[e._v("打印信息")])]),e._v(" "),a("p",[e._v("--verbose (-v)    # 以详述模式执行,可印出 GNU 错误讯息，并显示假执行所用的 USE flags。")]),e._v(" "),a("p",[e._v("--version (-V)    #显示 emerge 版本。不能与其它选项共享，名称与格式为规范。")]),e._v(" "),a("ul",[a("li",[e._v("查看依赖关系")])]),e._v(" "),a("p",[e._v("--pretend（-p）")]),e._v(" "),a("p",[e._v("-pv    #查看包含doc USE flag，来查看是否下载了文档。")]),e._v(" "),a("ul",[a("li",[e._v("查询软件包名称")])]),e._v(" "),a("p",[e._v("--search（-s）")]),e._v(" "),a("ul",[a("li",[e._v("查询软件包描述：")])]),e._v(" "),a("p",[e._v("--searchdesc (-S)")]),e._v(" "),a("ul",[a("li",[e._v("查看软件更新记录")])]),e._v(" "),a("p",[e._v("--changelog (-l)    #与 --pretend 并用，显示所有将更新套件的变更纪录。")]),e._v(" "),a("ul",[a("li",[e._v("只下载源码(以及它所依赖的)")])]),e._v(" "),a("p",[e._v("--fetchonly(-f)")]),e._v(" "),a("p",[e._v("-fp    #查看从哪下的源码")]),e._v(" "),a("ul",[a("li",[e._v("使用本地编好的预编译包，没有就下源码")])]),e._v(" "),a("p",[e._v("--usepkg(k)    #使用预编的套件 (来自 $PKGDIR),若有可免去编译")]),e._v(" "),a("ul",[a("li",[e._v("只使用本地编好的预编译包，否则不安装(绝对不编译，所有依赖的包都有binary才装)")])]),e._v(" "),a("p",[e._v("--usepkgonly(-K)")]),e._v(" "),a("ul",[a("li",[e._v("更新portage树")])]),e._v(" "),a("p",[e._v("--sync")]),e._v(" "),a("p",[e._v("或")]),e._v(" "),a("p",[e._v("-webrsync    //下载snapshot包来完成sync")]),e._v(" "),a("ul",[a("li",[e._v("更新软件")])]),e._v(" "),a("p",[e._v("--update (-u)    #更新套件到最近的版本")]),e._v(" "),a("p",[e._v("--upgradeonly (-U)    #更新套件，但不更新会导致版本号码降低的套件")]),e._v(" "),a("p",[e._v("--deep(-D)连同依赖一起更新")]),e._v(" "),a("p",[e._v("--with-bdeps=y编译依赖更新")]),e._v(" "),a("p",[e._v("--newuse(-N)按变化后的use更新")]),e._v(" "),a("p",[e._v("--tree, -t  Shows  the  dependency  tree  for  the given target by indenting dependencies.  This is only really useful  in  combination  with --emptytree or --update and --deep.")]),e._v(" "),a("ul",[a("li",[e._v("卸载软件")])]),e._v(" "),a("p",[e._v("--unmerge（-C）")]),e._v(" "),a("ul",[a("li",[e._v("移除不影响系统功能的软件（清理系统）")])]),e._v(" "),a("p",[e._v("--clean (-c)")]),e._v(" "),a("ul",[a("li",[e._v("卸载可以移除的依赖(深度清理)")])]),e._v(" "),a("p",[e._v("--depclean")]),e._v(" "),a("h2",{attrs:{id:"组合"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#组合"}},[e._v("#")]),e._v(" 组合")]),e._v(" "),a("ul",[a("li",[e._v("编译安装包/重装")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge -avt <packagename>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("带详细信息，树形依赖关系显示，交互确认指示的安装命令。 其中要注意在确认指示时，输出到屏幕上的包信息后面的 USE 标记，主要有 红色 与 蓝色两种 USE 标记。")]),e._v(" "),a("ul",[a("li",[e._v("删除安装包")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge -avC <packagename>\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[e._v("删除当前包，并显示详细信息以及删除前询问 .")]),e._v(" "),a("ul",[a("li",[e._v("升级软件")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge -avu xxx\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("升级系统软件")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge -avu system\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("升级整个系统")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("emerge --update --ask world     #更新portage树后，更新系统：\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("ul",[a("li",[e._v("移除孤立依赖的软件包")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# emerge --update --deep --newuse world\n\n# emerge --depclean\n\n# revdep-rebuild     重新编译那些刚刚移除包动态连接过的应用程序\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("p",[e._v("revdep-rebuild工具由gentoolkit包提供；使用前别忘了首先emerge它。")]),e._v(" "),a("h2",{attrs:{id:"我的系统升级过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#我的系统升级过程"}},[e._v("#")]),e._v(" 我的系统升级过程")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# emerge --sync //更新Portage树\n\n# emerge -avtuDN world //升级整个系统\n\n# emerge -avt --depclean //排除不需要的包\n\n// etc-update 如有必要，更新配置文件\n\n# revdep-rebuild //重新构建动态链接\n\n# env-update && source /etc/profile //如有必要，更新环境变量\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);