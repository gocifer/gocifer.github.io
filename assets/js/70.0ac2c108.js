(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{647:function(s,t,e){"use strict";e.r(t);var a=e(4),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h2",{attrs:{id:"linux-安装-postgresql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux-安装-postgresql"}},[s._v("#")]),s._v(" Linux 安装 postgresql")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("软件安装："),e("code",[s._v("sudo apt install postgresql pgadmin")])])]),s._v(" "),e("li",[e("p",[s._v("启用 "),e("code",[s._v("postgresql")]),s._v(" 服务："),e("code",[s._v("sudo systemctl start postgresql")])])]),s._v(" "),e("li",[e("p",[s._v("在数据库安装的时候，会创建两个未设置密码的用户")]),s._v(" "),e("ul",[e("li",[s._v("数据库超级用户（role：owner） "),e("code",[s._v("postgres")])]),s._v(" "),e("li",[s._v("计算机操作系统的用户 "),e("code",[s._v("postgres")])])])]),s._v(" "),e("li",[e("p",[s._v("以 "),e("code",[s._v("postgres")]),s._v(" 用户身份启动 "),e("code",[s._v("postgresql")]),s._v(" ："),e("code",[s._v("sudo -i -u postgres psql")])])]),s._v(" "),e("li",[e("p",[s._v("就会出现 Sql 交互Shell界面：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("postgres=#\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("修改 "),e("code",[s._v("postgres")]),s._v(" 用户密码")]),s._v(" "),e("div",{staticClass:"language-SQL line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sql"}},[e("code",[s._v("postgres"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# alter user postgres with password 'helloworld';")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("普通用户使用 psql")]),s._v(" "),e("p",[s._v("psql 是用来管理数据库的交互接口，具体的使用方法执行 "),e("code",[s._v("psql --help")]),s._v(" 查看，"),e("a",{attrs:{href:"#login"}},[s._v("下文")]),s._v(" 也有最长用到的格式。")]),s._v(" "),e("p",[s._v("但是在Linux下普通用户直接执行 "),e("code",[s._v("psql -U postgres -W")]),s._v(" 很多时候密码正确但是会有报错：")]),s._v(" "),e("p",[e("img",{attrs:{src:"/img/docimg/Screenshot%202020-10-31%20at%2000.25.22.png",width:"70%"}})]),s._v(" "),e("p",[s._v("只需要修改文件 "),e("code",[s._v("/etc/postgresql/${version}/main/pg_hba.conf")]),s._v(" 即可正常登陆：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("# Database administrative login by Unix domain socket\n# local\tall\tpostgres\tpeer\t\t#这是原来的行\nlocal\t\tall\tpostgres\ttrust\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])]),s._v(" "),e("h2",{attrs:{id:"mac安装-postgresql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mac安装-postgresql"}},[s._v("#")]),s._v(" Mac安装 postgresql")]),s._v(" "),e("ul",[e("li",[s._v("根据"),e("a",{attrs:{href:"https://www.postgresql.org/download/macosx/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网教程"),e("OutboundLink")],1),s._v("选择合适的方式安装\n"),e("ul",[e("li",[s._v("EDB认证"),e("a",{attrs:{href:"https://www.enterprisedb.com/downloads/postgres-postgresql-downloads",target:"_blank",rel:"noopener noreferrer"}},[s._v("的安装器"),e("OutboundLink")],1),s._v(" dmg 镜像：除了Postgresql-Server，Pgadmin Client，还有一些文档和驱动与商业用户支持的软件；")]),s._v(" "),e("li",[s._v("Postgres.app 原生应用格式")]),s._v(" "),e("li",[e("code",[s._v("homebrew")]),s._v(" 命令行方式")])])]),s._v(" "),e("li",[s._v("启动数据库：通过下载的（如果有） SQL Shell 图形工具或者以下指令 "),e("code",[s._v("/Library/PostgreSQL/13/scripts/runpsql.sh; exit")])])]),s._v(" "),e("p",[e("img",{staticClass:"lazy",attrs:{alt:"","data-src":"/img/docimg/image-20201101234254064.png",loading:"lazy"}})]),s._v(" "),e("blockquote",[e("p",[s._v("==> postgresql\nTo migrate existing data from a previous major version of PostgreSQL run:\nbrew postgresql-upgrade-database")]),s._v(" "),e("p",[s._v("This formula has created a default database cluster with:\ninitdb --locale=C -E UTF-8 /usr/local/var/postgres\nFor more details, read:\nhttps://www.postgresql.org/docs/13/app-initdb.html")]),s._v(" "),e("p",[s._v("To have launchd start postgresql now and restart at login:\nbrew services start postgresql\nOr, if you don't want/need a background service you can just run:\npg_ctl -D /usr/local/var/postgres start")])]),s._v(" "),e("h2",{attrs:{id:"登录-login"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#登录-login"}},[s._v("#")]),s._v(" [登录][#login]")]),s._v(" "),e("p",[e("code",[s._v("paql -U username -H hostname -p port -D database")])]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),e("p",[e("code",[s._v("sudo -i -u postgres psql")]),s._v(" 本质上是分为两步")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("originuser@host:~$ sudo -i -u postgres")]),s._v(" ：加载（postgres）用户的用户变量，登录 postgres 用户，会跳转到Linux主机上 postgres 用户的 home 目录")]),s._v(" "),e("li",[e("code",[s._v("postgres@host:~$ psql")]),s._v("  ：以当前用户名为默认（postgres），登录默认服务器（localhost）的默认数据库（postgres），等同 "),e("code",[s._v("psql -U $(whoami) -H localhost")])])])])])}),[],!1,null,null,null);t.default=r.exports}}]);